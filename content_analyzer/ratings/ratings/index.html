
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../raw_sources/">
      
      
        <link rel="next" href="../score_processors/">
      
      <link rel="icon" href="../../../images/icon_no_borders.svg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.0.15">
    
    
      
        <title>Ratings class - ClayRS documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.113286f1.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ratings-class" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ClayRS documentation" class="md-header__button md-logo" aria-label="ClayRS documentation" data-md-component="logo">
      
  <img src="../../../images/icon_no_borders.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ClayRS documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ratings class
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/swapUniba/ClayRS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    swapUniba/ClayRS
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../first_steps/installation/" class="md-tabs__link">
        First steps
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../introduction/" class="md-tabs__link md-tabs__link--active">
        Content Analyzer
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../recsys/introduction/" class="md-tabs__link">
        Recsys
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../evaluation/introduction/" class="md-tabs__link">
        Evaluation
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../utils/report/" class="md-tabs__link">
        Utils
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ClayRS documentation" class="md-nav__button md-logo" aria-label="ClayRS documentation" data-md-component="logo">
      
  <img src="../../../images/icon_no_borders.svg" alt="logo">

    </a>
    ClayRS documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/swapUniba/ClayRS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    swapUniba/ClayRS
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          First steps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          First steps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../first_steps/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../first_steps/quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../first_steps/colab_examples/" class="md-nav__link">
        Colab examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Content Analyzer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Content Analyzer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        Content Analyzer config and class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../raw_sources/" class="md-nav__link">
        Raw source wrappers
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Ratings
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Ratings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Ratings class
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Ratings class
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.Ratings" class="md-nav__link">
    Ratings
  </a>
  
    <nav class="md-nav" aria-label="Ratings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.item_id_column" class="md-nav__link">
    item_id_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.item_idx_column" class="md-nav__link">
    item_idx_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.score_column" class="md-nav__link">
    score_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.timestamp_column" class="md-nav__link">
    timestamp_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.uir" class="md-nav__link">
    uir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_item_id_column" class="md-nav__link">
    unique_item_id_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_item_idx_column" class="md-nav__link">
    unique_item_idx_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_user_id_column" class="md-nav__link">
    unique_user_id_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_user_idx_column" class="md-nav__link">
    unique_user_idx_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.user_id_column" class="md-nav__link">
    user_id_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.user_idx_column" class="md-nav__link">
    user_idx_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.__iter__" class="md-nav__link">
    __iter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.filter_ratings" class="md-nav__link">
    filter_ratings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_dataframe" class="md-nav__link">
    from_dataframe()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_list" class="md-nav__link">
    from_list()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_uir" class="md-nav__link">
    from_uir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.get_user_interactions" class="md-nav__link">
    get_user_interactions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.take_head_all" class="md-nav__link">
    take_head_all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.to_csv" class="md-nav__link">
    to_csv()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.to_dataframe" class="md-nav__link">
    to_dataframe()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../score_processors/" class="md-nav__link">
        Score processors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
          Information Processors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Information Processors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_5_1" id="__nav_3_5_1_label" tabindex="0">
          Preprocessors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5_1">
          <span class="md-nav__icon md-icon"></span>
          Preprocessors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_1_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_5_1_1" id="__nav_3_5_1_1_label" tabindex="0">
          Textual preprocessors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_5_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5_1_1">
          <span class="md-nav__icon md-icon"></span>
          Textual preprocessors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../information_preprocessors/textual_preprocessors/nltk/" class="md-nav__link">
        NLTK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../information_preprocessors/textual_preprocessors/spacy/" class="md-nav__link">
        Spacy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../information_preprocessors/textual_preprocessors/ekphrasis/" class="md-nav__link">
        Ekphrasis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_1_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_5_1_2" id="__nav_3_5_1_2_label" tabindex="0">
          Visual preprocessors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_5_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5_1_2">
          <span class="md-nav__icon md-icon"></span>
          Visual preprocessors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../information_preprocessors/visual_preprocessors/torch_preprocessors/" class="md-nav__link">
        Torch preprocessors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../information_preprocessors/postprocessors/postprocessor/" class="md-nav__link">
        Postprocessors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          Content Techniques
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Content Techniques
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6_1" id="__nav_3_6_1_label" tabindex="0">
          Textual techniques
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6_1">
          <span class="md-nav__icon md-icon"></span>
          Textual techniques
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_1_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6_1_1" id="__nav_3_6_1_1_label" tabindex="0">
          Embedding techniques
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_6_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6_1_1">
          <span class="md-nav__icon md-icon"></span>
          Embedding techniques
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/textual_techniques/embedding_techniques/word_embeddings/" class="md-nav__link">
        Word Embeddings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/textual_techniques/embedding_techniques/sentence_embeddings/" class="md-nav__link">
        Sentence Embeddings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/textual_techniques/embedding_techniques/document_embeddings/" class="md-nav__link">
        Document Embeddings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/textual_techniques/embedding_techniques/combining_embeddings/" class="md-nav__link">
        Combining Embeddings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/textual_techniques/embedding_techniques/contextualized_embeddings/" class="md-nav__link">
        Contextualized Embeddings
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/textual_techniques/tfidf/" class="md-nav__link">
        TfIdf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/textual_techniques/original_data/" class="md-nav__link">
        Original Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/textual_techniques/synset_df_frequency/" class="md-nav__link">
        Synset Document Frequency
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6_2" id="__nav_3_6_2_label" tabindex="0">
          Visual techniques
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6_2">
          <span class="md-nav__icon md-icon"></span>
          Visual techniques
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/visual_techniques/low_level_visual/" class="md-nav__link">
        Low level techniques
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/visual_techniques/high_level_visual/" class="md-nav__link">
        High level techniques
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../content_techniques/from_npy/" class="md-nav__link">
        Import from NPY
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
      
      
      
        <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
          Exogenous Techniques
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          Exogenous Techniques
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exogenous_techniques/dbpedia/" class="md-nav__link">
        DBPedia Mapping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exogenous_techniques/properties_from_dataset/" class="md-nav__link">
        Properties From Dataset
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exogenous_techniques/babelfy/" class="md-nav__link">
        BabelFy Entity Linking
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
      
      
      
        <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
          Memory Interfaces
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Memory Interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../index_interface/" class="md-nav__link">
        Index Interface
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Recsys
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Recsys
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          Partitioning techniques
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Partitioning techniques
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/partitioning/abstract_partitioning/" class="md-nav__link">
        Abstract Partitioning class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/partitioning/hold_out/" class="md-nav__link">
        Hold Out
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/partitioning/kfold/" class="md-nav__link">
        KFold
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/partitioning/bootstrap/" class="md-nav__link">
        Bootstrap
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          Content Based recommendation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Content Based recommendation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/content_based/content_based_recsys/" class="md-nav__link">
        Content Based recsys
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3_2" id="__nav_4_3_2_label" tabindex="0">
          Content Based algorithms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3_2">
          <span class="md-nav__icon md-icon"></span>
          Content Based algorithms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/content_based/content_based_algorithms/centroid_vector/" class="md-nav__link">
        Centroid Vector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/content_based/content_based_algorithms/classifier_recommender/" class="md-nav__link">
        Classifier Recommender
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/content_based/content_based_algorithms/linear_predictor/" class="md-nav__link">
        Linear Predictor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/content_based/content_based_algorithms/index_query/" class="md-nav__link">
        Index Query
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
          Visual Based algorithms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3_3">
          <span class="md-nav__icon md-icon"></span>
          Visual Based algorithms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/content_based/visual_based_algorithms/vbpr/" class="md-nav__link">
        VBPR
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
          Graph based recommendation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Graph based recommendation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/graph_based/graph_based_recsys/" class="md-nav__link">
        Graph Based recsys
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_4_2" id="__nav_4_4_2_label" tabindex="0">
          Graphs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4_2">
          <span class="md-nav__icon md-icon"></span>
          Graphs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/graph_based/graphs/nodes/" class="md-nav__link">
        Nodes categories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/graph_based/graphs/nx_bipartite/" class="md-nav__link">
        Bipartite Graph
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/graph_based/graphs/nx_tripartite/" class="md-nav__link">
        Tripartite Graph
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/graph_based/graphs/nx_full/" class="md-nav__link">
        Full Graph
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_4_3" id="__nav_4_4_3_label" tabindex="0">
          Graph Based algorithms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4_3">
          <span class="md-nav__icon md-icon"></span>
          Graph Based algorithms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/graph_based/graph_based_algorithms/nx_pagerank/" class="md-nav__link">
        Page Rank
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/graph_based/feature_selection/" class="md-nav__link">
        Feature Selection
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
      
      
      
        <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
          Experiment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Experiment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/experiment/" class="md-nav__link">
        Experiment class
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
      
      
      
        <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
          Methodologies
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Methodologies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/methodology/abstract_methodology/" class="md-nav__link">
        Abstract Methodology class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/methodology/test_ratings/" class="md-nav__link">
        TestRatings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/methodology/test_items/" class="md-nav__link">
        TestItems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/methodology/training_items/" class="md-nav__link">
        TrainingItems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/methodology/all_items/" class="md-nav__link">
        AllItems
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Evaluation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Evaluation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/eval_model/" class="md-nav__link">
        EvalModel class
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          Metrics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Metrics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/metrics/classification_metrics/" class="md-nav__link">
        Classification metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/metrics/ranking_metrics/" class="md-nav__link">
        Ranking metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/metrics/error_metrics/" class="md-nav__link">
        Error metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/metrics/fairness_metrics/" class="md-nav__link">
        Fairness metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/metrics/plot_metrics/" class="md-nav__link">
        Plot metrics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          Statistical tests
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Statistical tests
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/statistical_tests/paired/" class="md-nav__link">
        Paired
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/report/" class="md-nav__link">
        Report
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.Ratings" class="md-nav__link">
    Ratings
  </a>
  
    <nav class="md-nav" aria-label="Ratings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.item_id_column" class="md-nav__link">
    item_id_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.item_idx_column" class="md-nav__link">
    item_idx_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.score_column" class="md-nav__link">
    score_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.timestamp_column" class="md-nav__link">
    timestamp_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.uir" class="md-nav__link">
    uir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_item_id_column" class="md-nav__link">
    unique_item_id_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_item_idx_column" class="md-nav__link">
    unique_item_idx_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_user_id_column" class="md-nav__link">
    unique_user_id_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_user_idx_column" class="md-nav__link">
    unique_user_idx_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.user_id_column" class="md-nav__link">
    user_id_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.user_idx_column" class="md-nav__link">
    user_idx_column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.__iter__" class="md-nav__link">
    __iter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.filter_ratings" class="md-nav__link">
    filter_ratings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_dataframe" class="md-nav__link">
    from_dataframe()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_list" class="md-nav__link">
    from_list()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_uir" class="md-nav__link">
    from_uir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.get_user_interactions" class="md-nav__link">
    get_user_interactions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.take_head_all" class="md-nav__link">
    take_head_all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.to_csv" class="md-nav__link">
    to_csv()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.content_analyzer.ratings_manager.ratings.Ratings.to_dataframe" class="md-nav__link">
    to_dataframe()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="ratings-class">Ratings class</h1>
<p>The <code>Ratings</code> class is the main responsible for importing a dataset containing interactions between users and items</p>


<div class="doc doc-object doc-class">



<h2 id="clayrs.content_analyzer.ratings_manager.Ratings" class="doc doc-heading">
<code class="highlight language-python"><span class="n">Ratings</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">user_id_column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_id_column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">score_column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">timestamp_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">score_processor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">user_map</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents first">

  
      <p>Class responsible for importing an interaction frame into the framework</p>
<p><strong>If</strong> the source file contains users, items and ratings in this order,
no additional parameters are needed, <strong>otherwise</strong> the mapping must be explicitly specified using:</p>
<ul>
<li><strong>'user_id'</strong> column,</li>
<li><strong>'item_id'</strong> column,</li>
<li><strong>'score'</strong> column</li>
</ul>
<p>The <em>score</em> column can also be processed: in case you would like to consider as score the sentiment of a textual
review, or maybe normalizing all scores in <span class="arithmatex">\([0, 1]\)</span> range. Check the example below for more</p>
<p>Note that, during the import phase, the user and item ids will be converted to integers and a mapping between
the newly created ids and the original string ids will be created. For replicability purposes, it is possible to
pass your custom item and user map instead of leaving this task to the framework. Check the example below to see how</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><span class="filename">CSV raw source</span><pre><span></span><code>user_id,item_id,rating,timestamp,review
u1,i1,4,00112,good movie
u2,i1,3,00113,an average movie
u2,i32,2,00114,a bad movie
</code></pre></div>
<p>As you can see the user id column, item id column and score column are the first three column and are already in
sequential order, so no additional parameter is required to the Ratings class:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clayrs.content_analyzer</span> <span class="k">as</span> <span class="nn">ca</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ratings_raw_source</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">CSVFile</span><span class="p">(</span><span class="s1">&#39;ratings.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># add timestamp=&#39;timestamp&#39; to the following if</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># you want to load also the timestamp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ratings</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">Ratings</span><span class="p">(</span><span class="n">ratings_raw_source</span><span class="p">)</span>
</code></pre></div>
    <p>In case columns in the raw source are not in the above order you must specify an appropriate mapping via
positional index (useful in case your raw source doesn't have a header) or via column ids:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># (mapping by index) EQUIVALENT:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ratings</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">Ratings</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ca</span><span class="o">.</span><span class="n">CSVFile</span><span class="p">(</span><span class="s1">&#39;ratings.csv&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_id_column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  <span class="c1"># (1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_id_column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># (2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score_column</span><span class="o">=</span><span class="mi">2</span>  <span class="c1"># (3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
</code></pre></div>
    <ol>
<li>First column of raw source is the column containing all user ids</li>
<li>Second column of raw source is the column containing all item ids</li>
<li>Third column of raw source is the column containing all the scores</li>
</ol>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># (mapping by column name) EQUIVALENT:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ratings</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">Ratings</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ca</span><span class="o">.</span><span class="n">CSVFile</span><span class="p">(</span><span class="s1">&#39;ratings.csv&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_id_column</span><span class="o">=</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span>  <span class="c1"># (1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_id_column</span><span class="o">=</span><span class="s1">&#39;item_id&#39;</span><span class="p">,</span>  <span class="c1"># (2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score_column</span><span class="o">=</span><span class="s1">&#39;rating&#39;</span>  <span class="c1"># (3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
</code></pre></div>
    <ol>
<li>The column with id 'user_id' of raw source is the column containing all user ids</li>
<li>The column with id 'item_id' of raw source is the column containing all item ids</li>
<li>The column with id 'rating' of raw source is the column containing all the scores</li>
</ol>
<p>In case you would like to use the sentiment of the <code>review</code> column of the above raw source as score column,
simply specify the appropriate <code>ScoreProcessor</code> object</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ratings_raw_source</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">CSVFile</span><span class="p">(</span><span class="s1">&#39;ratings.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ratings</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">Ratings</span><span class="p">(</span><span class="n">ratings_raw_source</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">score_column</span><span class="o">=</span><span class="s1">&#39;review&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">score_processor</span><span class="o">=</span><span class="n">ca</span><span class="o">.</span><span class="n">TextBlobSentimentAnalysis</span><span class="p">())</span>
</code></pre></div>
    <p>In case you would like to specify the mappings for items or users, simply specify them in the corresponding
parameters</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ratings_raw_source</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">CSVFile</span><span class="p">(</span><span class="s1">&#39;ratings.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">custom_item_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;i1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;i2&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;i3&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">custom_user_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;u1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;u2&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;u3&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ratings</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">Ratings</span><span class="p">(</span><span class="n">ratings_raw_source</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">item_map</span><span class="o">=</span><span class="n">custom_item_map</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                     <span class="n">user_map</span><span class="o">=</span><span class="n">custom_user_map</span><span class="p">)</span>
</code></pre></div>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>source</code></td>
          <td class="doc-param-details">
            <p>Source containing the raw interaction frame</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="clayrs.content_analyzer.raw_information_source.RawInformationSource">RawInformationSource</span></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>user_id_column</code></td>
          <td class="doc-param-details">
            <p>Name or positional index of the field of the raw source representing <em>users</em> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>0</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>item_id_column</code></td>
          <td class="doc-param-details">
            <p>Name or positional index of the field of the raw source representing <em>items</em> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>1</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>score_column</code></td>
          <td class="doc-param-details">
            <p>Name or positional index of the field of the raw source representing <em>score</em> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>2</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>timestamp_column</code></td>
          <td class="doc-param-details">
            <p>Name or positional index of the field of the raw source representing <em>timesamp</em> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>score_processor</code></td>
          <td class="doc-param-details">
            <p><code>ScoreProcessor</code> object which will process the <code>score_column</code> accordingly. Useful if you want
to perform sentiment analysis on a textual column or you want to normalize all scores in <span class="arithmatex">\([0, 1]\)</span> range</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="clayrs.content_analyzer.ratings_manager.score_processor.ScoreProcessor">ScoreProcessor</span></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>item_map</code></td>
          <td class="doc-param-details">
            <p>dictionary with string keys (the item ids) and integer values (the corresponding unique integer ids)
used to create the item mapping. If not specified, it will be automatically created internally</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>user_map</code></td>
          <td class="doc-param-details">
            <p>dictionary with string keys (the user ids) and integer values (the corresponding unique integer ids)
used to create the user mapping. If not specified, it will be automatically created internally</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>


          <details class="quote">
            <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">RawInformationSource</span><span class="p">,</span>
             <span class="n">user_id_column</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
             <span class="n">item_id_column</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
             <span class="n">score_column</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
             <span class="n">timestamp_column</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">score_processor</span><span class="p">:</span> <span class="n">ScoreProcessor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">item_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">user_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

    <span class="c1"># utility dictionary that will contain each user index as key and a numpy array, containing the indexes of the</span>
    <span class="c1"># rows in the uir matrix which refer to an interaction for that user, as value. This is done to optimize</span>
    <span class="c1"># performance when requesting all interactions of a certain user</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_user2rows</span><span class="p">:</span> <span class="n">Dict</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_uir</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">item_map</span><span class="p">:</span> <span class="n">StrIntMap</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">user_map</span><span class="p">:</span> <span class="n">StrIntMap</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_import_ratings</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">user_id_column</span><span class="p">,</span> <span class="n">item_id_column</span><span class="p">,</span>
                         <span class="n">score_column</span><span class="p">,</span> <span class="n">timestamp_column</span><span class="p">,</span> <span class="n">score_processor</span><span class="p">,</span> <span class="n">item_map</span><span class="p">,</span> <span class="n">user_map</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.item_id_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">item_id_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the 'item_id' column of the interaction frame. This will return the item column "as is", so it will
contain duplicate items. Use the 'unique_item_id_column' method to get unique items.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Items column with duplicates (string ids)</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.item_idx_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">item_idx_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the 'item_idx' column of the uir matrix. This will return the item column "as is", so it will contain
duplicate items. Use the 'unique_item_idx_column' method to get unique items.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Items column with duplicates (integer ids)</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.score_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">score_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the score column. This will return the score column "as is".</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Score column</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.timestamp_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">timestamp_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the timestamp column. This will return the score column "as is". If no timestamp is present then an
empty list is returned</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Timestamp column or empty list if no timestamp is present</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.uir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">uir</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the uir matrix created from the interaction frame.
The imported ratings are converted in the form of a numpy ndarray where each row will represent an interaction.
This uir matrix can be seen in a tabular representation as follows:</p>
<div class="highlight"><span class="filename">UIR matrix visualized: tabular format</span><pre><span></span><code>+----------+----------+--------+-----------+
| user_idx | item_idx | score  | timestamp |
+----------+----------+--------+-----------+
| 0.       | 0.       | 4      | np.nan    |
| 0.       | 1.       | 3      | np.nan    |
| 1.       | 4.       | 1      | np.nan    |
+----------+----------+--------+-----------+
</code></pre></div>
<p>Where the 'user_idx' and 'item_idx' columns contain the integer ids from the mapping of the
<code>Ratings</code> object itself (these integer ids match the string ids that are in the original interaction frame)</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_item_id_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">unique_item_id_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the 'item_id' column of the interaction frame. This will return the item column without duplicates.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Items column without duplicates (string ids)</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_item_idx_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">unique_item_idx_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the 'item_idx' column of the uir matrix. This will return the item column without duplicates.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Items column without duplicates (integer ids)</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_user_id_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">unique_user_id_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the 'user_id' column of the interaction frame. This will return the user column without duplicates.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Users column without duplicates (string ids)</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.unique_user_idx_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">unique_user_idx_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the 'user_idx' column of the uir matrix. This will return the user column without duplicates.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Users column without duplicates (integer ids)</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.user_id_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">user_id_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the 'user_id' column of the interaction frame. This will return the user column "as is", so it will
contain duplicate users. Use the 'unique_user_id_column' method to get unique users.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Users column with duplicates (string ids)</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.user_idx_column" class="doc doc-heading">
<code class="highlight language-python"><span class="n">user_idx_column</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Getter for the 'user_idx' column of the uir matrix. This will return the user column "as is", so it will contain
duplicate users. Use the 'unique_user_idx_column' method to get unique users.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Users column with duplicates (integer ids)</p>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.__iter__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Note: iteration is done on integer ids, if you want to iterate over string ids you need to iterate over the
'user_id_column' or 'item_id_column'</p>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Note: iteration is done on integer ids, if you want to iterate over string ids you need to iterate over the</span>
<span class="sd">    &#39;user_id_column&#39; or &#39;item_id_column&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">yield from</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_uir</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.filter_ratings" class="doc doc-heading">
<code class="highlight language-python"><span class="n">filter_ratings</span><span class="p">(</span><span class="n">user_list</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method which will filter the rating frame by keeping only interactions of users appearing in the <code>user_list</code>.
This method will return a new <code>Ratings</code> object without changing the original</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><span class="filename">Starting Rating object</span><pre><span></span><code>+---------+---------+-------+
| user_id | item_id | score |
+---------+---------+-------+
| u1      | i1      |     4 |
| u1      | i2      |     3 |
| u2      | i5      |     1 |
+---------+---------+-------+
</code></pre></div>
<div class="highlight"><span class="filename">Starting Rating object: corresponding uir matrix</span><pre><span></span><code>+----------+----------+--------+-----------+
| user_idx | item_idx | score  | timestamp |
+----------+----------+--------+-----------+
| 0.       | 0.       | 4      | np.nan    |
| 0.       | 1.       | 3      | np.nan    |
| 1.       | 4.       | 1      | np.nan    |
+----------+----------+--------+-----------+
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">rating_frame</span><span class="o">.</span><span class="n">filter_ratings</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>
    <div class="highlight"><span class="filename">Returned Rating object</span><pre><span></span><code>+---------+---------+-------+
| user_id | item_id | score |
+---------+---------+-------+
| u1      | i1      |     4 |
| u1      | i2      |     3 |
+---------+---------+-------+
</code></pre></div>
<div class="highlight"><span class="filename">Returned Rating object: corresponding uir matrix</span><pre><span></span><code>+----------+----------+--------+-----------+
| user_idx | item_idx | score  | timestamp |
+----------+----------+--------+-----------+
| 0.       | 0.       | 4      | np.nan    |
| 0.       | 1.       | 3      | np.nan    |
+----------+----------+--------+-----------+
</code></pre></div>
<p>If you don't know the integer ids for the users, you can obtain them using the user map as follows:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">user_idxs</span> <span class="o">=</span> <span class="n">rating_frame</span><span class="o">.</span><span class="n">user_map</span><span class="p">[[</span><span class="s1">&#39;u1&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rating_frame</span><span class="o">.</span><span class="n">filter_ratings</span><span class="p">(</span><span class="n">user_list</span><span class="o">=</span><span class="n">user_idxs</span><span class="p">)</span>
</code></pre></div>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>user_list</code></td>
          <td class="doc-param-details">
            <p>List of user integer ids that will be present in the filtered <code>Ratings</code> object</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Sequence" href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns
    The filtered Ratings object which contains only interactions of selected users</p>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">filter_ratings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_list</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Ratings</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method which will filter the rating frame by keeping only interactions of users appearing in the `user_list`.</span>
<span class="sd">    This method will return a new `Ratings` object without changing the original</span>

<span class="sd">    Examples:</span>

<span class="sd">        ```title=&quot;Starting Rating object&quot;</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | user_id | item_id | score |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | u1      | i1      |     4 |</span>
<span class="sd">        | u1      | i2      |     3 |</span>
<span class="sd">        | u2      | i5      |     1 |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        ```</span>

<span class="sd">        ```title=&quot;Starting Rating object: corresponding uir matrix&quot;</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | user_idx | item_idx | score  | timestamp |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | 0.       | 0.       | 4      | np.nan    |</span>
<span class="sd">        | 0.       | 1.       | 3      | np.nan    |</span>
<span class="sd">        | 1.       | 4.       | 1      | np.nan    |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        ```</span>

<span class="sd">        &gt;&gt;&gt; rating_frame.filter_ratings([0])</span>

<span class="sd">        ```title=&quot;Returned Rating object&quot;</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | user_id | item_id | score |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | u1      | i1      |     4 |</span>
<span class="sd">        | u1      | i2      |     3 |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        ```</span>

<span class="sd">        ```title=&quot;Returned Rating object: corresponding uir matrix&quot;</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | user_idx | item_idx | score  | timestamp |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | 0.       | 0.       | 4      | np.nan    |</span>
<span class="sd">        | 0.       | 1.       | 3      | np.nan    |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        ```</span>

<span class="sd">        If you don&#39;t know the integer ids for the users, you can obtain them using the user map as follows:</span>

<span class="sd">        &gt;&gt;&gt; user_idxs = rating_frame.user_map[[&#39;u1&#39;]]</span>
<span class="sd">        &gt;&gt;&gt; rating_frame.filter_ratings(user_list=user_idxs)</span>

<span class="sd">    Args:</span>
<span class="sd">        user_list: List of user integer ids that will be present in the filtered `Ratings` object</span>

<span class="sd">    Returns</span>
<span class="sd">        The filtered Ratings object which contains only interactions of selected users</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">valid_indexes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_idx_column</span><span class="p">,</span> <span class="n">user_list</span><span class="p">))</span>
    <span class="n">new_uir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uir</span><span class="p">[</span><span class="n">valid_indexes</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">Ratings</span><span class="o">.</span><span class="n">from_uir</span><span class="p">(</span><span class="n">new_uir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_map</span><span class="o">.</span><span class="n">map</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_map</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_dataframe" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_dataframe</span><span class="p">(</span><span class="n">interaction_frame</span><span class="p">,</span> <span class="n">user_column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">score_column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">timestamp_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">user_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item_map</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Class method which allows to instantiate a <code>Ratings</code> object by using an existing pandas DataFrame</p>
<p><strong>If</strong> the pandas DataFrame contains users, items and ratings in this order,
no additional parameters are needed, <strong>otherwise</strong> the mapping must be explicitly specified using:</p>
<ul>
<li><strong>'user_id'</strong> column,</li>
<li><strong>'item_id'</strong> column,</li>
<li><strong>'score'</strong> column</li>
</ul>
<p>Check documentation of the <code>Ratings</code> class for examples on mapping columns explicitly, the functioning is the
same</p>
<p>Furthermore, it is also possible to specify the user and item mapping between original string ids and
integer ones. However, differently from the <code>Ratings</code> class documentation, it is possible not only to specify
them as dictionaries but also as numpy arrays or <code>StrIntMap</code> objects directly. The end result will be the same
independently of the type, but it is suggested to check the <code>StrIntMap</code> class documentation to understand
the differences between the three possible types</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ratings_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="s1">&#39;u1&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                           <span class="s1">&#39;item_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;i1&#39;</span><span class="p">,</span> <span class="s1">&#39;i2&#39;</span><span class="p">,</span> <span class="s1">&#39;i3&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                           <span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ratings</span><span class="o">.</span><span class="n">from_dataframe</span><span class="p">(</span><span class="n">ratings_df</span><span class="p">)</span>
</code></pre></div>
    <p>or</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">user_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;u1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;i1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;i2&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;i3&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ratings_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="s1">&#39;u1&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                           <span class="s1">&#39;item_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;i1&#39;</span><span class="p">,</span> <span class="s1">&#39;i2&#39;</span><span class="p">,</span> <span class="s1">&#39;i3&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                           <span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ratings</span><span class="o">.</span><span class="n">from_dataframe</span><span class="p">(</span><span class="n">ratings_df</span><span class="p">,</span> <span class="n">user_map</span><span class="o">=</span><span class="n">user_map</span><span class="p">,</span> <span class="n">item_map</span><span class="o">=</span><span class="n">item_map</span><span class="p">)</span>
</code></pre></div>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>interaction_frame</code></td>
          <td class="doc-param-details">
            <p>pandas DataFrame which represents the original interactions frame</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="pandas" href="https://pandas.pydata.org/docs/index.html#module-pandas">pd</a>.<a class="autorefs autorefs-external" title="pandas.DataFrame" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame">DataFrame</a></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>user_column</code></td>
          <td class="doc-param-details">
            <p>Name or positional index of the field of the DataFrame representing <em>users</em> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>0</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>item_column</code></td>
          <td class="doc-param-details">
            <p>Name or positional index of the field of the DataFrame representing <em>items</em> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>1</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>score_column</code></td>
          <td class="doc-param-details">
            <p>Name or positional index of the field of the DataFrame representing <em>score</em> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>2</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>timestamp_column</code></td>
          <td class="doc-param-details">
            <p>Name or positional index of the field of the raw source representing <em>timesamp</em> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>item_map</code></td>
          <td class="doc-param-details">
            <p>dictionary with string keys (the item ids) and integer values (the corresponding unique integer
ids) used to create the item mapping. If not specified, it will be automatically created internally</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="clayrs.content_analyzer.ratings_manager.ratings.StrIntMap">StrIntMap</span>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>user_map</code></td>
          <td class="doc-param-details">
            <p>dictionary with string keys (the user ids) and integer values (the corresponding unique integer
ids) used to create the user mapping. If not specified, it will be automatically created internally</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="clayrs.content_analyzer.ratings_manager.ratings.StrIntMap">StrIntMap</span>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-internal" title="clayrs.content_analyzer.ratings_manager.ratings.Ratings" href="#clayrs.content_analyzer.ratings_manager.Ratings">Ratings</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p><code>Ratings</code> object instantiated thanks to an existing Pandas DataFrame</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@handler_score_not_float</span>
<span class="k">def</span> <span class="nf">from_dataframe</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">interaction_frame</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
                   <span class="n">user_column</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="n">item_column</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                   <span class="n">score_column</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
                   <span class="n">timestamp_column</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">user_map</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">StrIntMap</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">item_map</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">StrIntMap</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Ratings</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class method which allows to instantiate a `Ratings` object by using an existing pandas DataFrame</span>

<span class="sd">    **If** the pandas DataFrame contains users, items and ratings in this order,</span>
<span class="sd">    no additional parameters are needed, **otherwise** the mapping must be explicitly specified using:</span>

<span class="sd">    * **&#39;user_id&#39;** column,</span>
<span class="sd">    * **&#39;item_id&#39;** column,</span>
<span class="sd">    * **&#39;score&#39;** column</span>

<span class="sd">    Check documentation of the `Ratings` class for examples on mapping columns explicitly, the functioning is the</span>
<span class="sd">    same</span>

<span class="sd">    Furthermore, it is also possible to specify the user and item mapping between original string ids and</span>
<span class="sd">    integer ones. However, differently from the `Ratings` class documentation, it is possible not only to specify</span>
<span class="sd">    them as dictionaries but also as numpy arrays or `StrIntMap` objects directly. The end result will be the same</span>
<span class="sd">    independently of the type, but it is suggested to check the `StrIntMap` class documentation to understand</span>
<span class="sd">    the differences between the three possible types</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; ratings_df = pd.DataFrame({&#39;user_id&#39;: [&#39;u1&#39;, &#39;u1&#39;, &#39;u1&#39;],</span>
<span class="sd">        &gt;&gt;&gt;                            &#39;item_id&#39;: [&#39;i1&#39;, &#39;i2&#39;, &#39;i3&#39;],</span>
<span class="sd">        &gt;&gt;&gt;                            &#39;score&#39;: [4, 3, 3])</span>
<span class="sd">        &gt;&gt;&gt; Ratings.from_dataframe(ratings_df)</span>

<span class="sd">        or</span>

<span class="sd">        &gt;&gt;&gt; user_map = {&#39;u1&#39;: 0}</span>
<span class="sd">        &gt;&gt;&gt; item_map = {&#39;i1&#39;: 0, &#39;i2&#39;: 2, &#39;i3&#39;: 1}</span>
<span class="sd">        &gt;&gt;&gt; ratings_df = pd.DataFrame({&#39;user_id&#39;: [&#39;u1&#39;, &#39;u1&#39;, &#39;u1&#39;],</span>
<span class="sd">        &gt;&gt;&gt;                            &#39;item_id&#39;: [&#39;i1&#39;, &#39;i2&#39;, &#39;i3&#39;],</span>
<span class="sd">        &gt;&gt;&gt;                            &#39;score&#39;: [4, 3, 3])</span>
<span class="sd">        &gt;&gt;&gt; Ratings.from_dataframe(ratings_df, user_map=user_map, item_map=item_map)</span>

<span class="sd">    Args:</span>
<span class="sd">        interaction_frame: pandas DataFrame which represents the original interactions frame</span>
<span class="sd">        user_column: Name or positional index of the field of the DataFrame representing *users* column</span>
<span class="sd">        item_column: Name or positional index of the field of the DataFrame representing *items* column</span>
<span class="sd">        score_column: Name or positional index of the field of the DataFrame representing *score* column</span>
<span class="sd">        timestamp_column: Name or positional index of the field of the raw source representing *timesamp* column</span>
<span class="sd">        item_map: dictionary with string keys (the item ids) and integer values (the corresponding unique integer</span>
<span class="sd">            ids) used to create the item mapping. If not specified, it will be automatically created internally</span>
<span class="sd">        user_map: dictionary with string keys (the user ids) and integer values (the corresponding unique integer</span>
<span class="sd">            ids) used to create the user mapping. If not specified, it will be automatically created internally</span>

<span class="sd">    Returns:</span>
<span class="sd">        `Ratings` object instantiated thanks to an existing Pandas DataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_value_row_df</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">dtype</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># it&#39;s an int, so we get the column id and then we get the corresponding value in the row</span>
                <span class="n">key_dict</span> <span class="o">=</span> <span class="n">interaction_frame</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">key_dict</span><span class="p">]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s2"> not found in interaction frame!&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s2"> not found in interaction frame!&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">dtype</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>  <span class="c1"># Does not call __init__</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Ratings</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>  <span class="c1"># Don&#39;t forget to call any polymorphic base class initializers</span>

    <span class="c1"># lists that will contain the original data temporarily</span>
    <span class="c1"># this is so that the conversion from string ids to integers will be called only once</span>
    <span class="c1"># said lists will also be used to create the mappings if not specified in the parameters</span>
    <span class="n">tmp_user_id_column</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_item_id_column</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_score_column</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_timestamp_column</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">interaction_frame</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)):</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_value_row_df</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">user_column</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">item_id</span> <span class="o">=</span> <span class="n">get_value_row_df</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">item_column</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">get_value_row_df</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">score_column</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">get_value_row_df</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">timestamp_column</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">if</span> <span class="n">timestamp_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

        <span class="n">tmp_user_id_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">tmp_item_id_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
        <span class="n">tmp_score_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
        <span class="n">tmp_timestamp_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>

    <span class="c1"># create the item_map from the item_id column if not specified</span>
    <span class="k">if</span> <span class="n">item_map</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">item_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">tmp_item_id_column</span><span class="p">))))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">item_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">item_map</span><span class="p">)</span>

    <span class="c1"># create the user_map from the user_id column if not specified</span>
    <span class="k">if</span> <span class="n">user_map</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">user_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">tmp_user_id_column</span><span class="p">))))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">user_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">user_map</span><span class="p">)</span>

    <span class="n">tmp_user_id_column</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">tmp_user_id_column</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">tmp_user_id_column</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UserNone</span><span class="p">(</span><span class="s1">&#39;User column cannot contain None values&#39;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span>

    <span class="n">tmp_item_id_column</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">tmp_item_id_column</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">tmp_item_id_column</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ItemNone</span><span class="p">(</span><span class="s1">&#39;Item column cannot contain None values&#39;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span>

    <span class="c1"># convert user and item ids and create the uir matrix</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">user_map</span><span class="o">.</span><span class="n">convert_seq_str2int</span><span class="p">(</span><span class="n">tmp_user_id_column</span><span class="p">),</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">item_map</span><span class="o">.</span><span class="n">convert_seq_str2int</span><span class="p">(</span><span class="n">tmp_item_id_column</span><span class="p">),</span>
        <span class="n">tmp_score_column</span><span class="p">,</span> <span class="n">tmp_timestamp_column</span>
    <span class="p">))</span><span class="o">.</span><span class="n">T</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># create the utility dictionary user2rows</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_user2rows</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">user_idx</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">user_idx</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">user_idx</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">unique_user_idx_column</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_list" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_list</span><span class="p">(</span><span class="n">interaction_list</span><span class="p">,</span> <span class="n">user_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item_map</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Class method which allows to instantiate a <code>Ratings</code> object by using an existing list of tuples or its generator</p>
<p>Furthermore, it is also possible to specify the user and item mapping between original string ids and
integer ones. However, differently from the <code>Ratings</code> class documentation, it is possible not only to specify
them as dictionaries but also as numpy arrays or <code>StrIntMap</code> objects directly. The end result will be the same
independently of the type, but it is suggested to check the <code>StrIntMap</code> class documentation to understand
the differences between the three possible types</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">interactions_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="s1">&#39;i1&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;u2&#39;</span><span class="p">,</span> <span class="s1">&#39;i1&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ratings</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="n">interactions_list</span><span class="p">)</span>
</code></pre></div>
    <p>or</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">user_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;u1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;u2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;i1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interactions_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="s1">&#39;i1&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;u2&#39;</span><span class="p">,</span> <span class="s1">&#39;i1&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ratings</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="n">interactions_list</span><span class="p">,</span> <span class="n">user_map</span><span class="o">=</span><span class="n">user_map</span><span class="p">,</span> <span class="n">item_map</span><span class="o">=</span><span class="n">item_map</span><span class="p">)</span>
</code></pre></div>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>interaction_list</code></td>
          <td class="doc-param-details">
            <p>List containing tuples or its generator</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>], <a class="autorefs autorefs-external" title="typing.Iterator" href="https://docs.python.org/3/library/typing.html#typing.Iterator">Iterator</a>]</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>item_map</code></td>
          <td class="doc-param-details">
            <p>dictionary with string keys (the item ids) and integer values (the corresponding unique integer
ids) used to create the item mapping. If not specified, it will be automatically created internally</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="clayrs.content_analyzer.ratings_manager.ratings.StrIntMap">StrIntMap</span>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>user_map</code></td>
          <td class="doc-param-details">
            <p>dictionary with string keys (the user ids) and integer values (the corresponding unique integer
ids) used to create the user mapping. If not specified, it will be automatically created internally</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="clayrs.content_analyzer.ratings_manager.ratings.StrIntMap">StrIntMap</span>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-internal" title="clayrs.content_analyzer.ratings_manager.ratings.Ratings" href="#clayrs.content_analyzer.ratings_manager.Ratings">Ratings</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p><code>Ratings</code> object instantiated thanks to an existing interaction list</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@handler_score_not_float</span>
<span class="k">def</span> <span class="nf">from_list</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">interaction_list</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">],</span> <span class="n">Iterator</span><span class="p">],</span>
              <span class="n">user_map</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">StrIntMap</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
              <span class="n">item_map</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">StrIntMap</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Ratings</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class method which allows to instantiate a `Ratings` object by using an existing list of tuples or its generator</span>

<span class="sd">    Furthermore, it is also possible to specify the user and item mapping between original string ids and</span>
<span class="sd">    integer ones. However, differently from the `Ratings` class documentation, it is possible not only to specify</span>
<span class="sd">    them as dictionaries but also as numpy arrays or `StrIntMap` objects directly. The end result will be the same</span>
<span class="sd">    independently of the type, but it is suggested to check the `StrIntMap` class documentation to understand</span>
<span class="sd">    the differences between the three possible types</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; interactions_list = [(&#39;u1&#39;, &#39;i1&#39;, 5), (&#39;u2&#39;, &#39;i1&#39;, 4)]</span>
<span class="sd">        &gt;&gt;&gt; Ratings.from_list(interactions_list)</span>

<span class="sd">        or</span>

<span class="sd">        &gt;&gt;&gt; user_map = {&#39;u1&#39;: 0, &#39;u2&#39;: 1}</span>
<span class="sd">        &gt;&gt;&gt; item_map = {&#39;i1&#39;: 0}</span>
<span class="sd">        &gt;&gt;&gt; interactions_list = [(&#39;u1&#39;, &#39;i1&#39;, 5), (&#39;u2&#39;, &#39;i1&#39;, 4)]</span>
<span class="sd">        &gt;&gt;&gt; Ratings.from_list(interactions_list, user_map=user_map, item_map=item_map)</span>

<span class="sd">    Args:</span>
<span class="sd">        interaction_list: List containing tuples or its generator</span>
<span class="sd">        item_map: dictionary with string keys (the item ids) and integer values (the corresponding unique integer</span>
<span class="sd">            ids) used to create the item mapping. If not specified, it will be automatically created internally</span>
<span class="sd">        user_map: dictionary with string keys (the user ids) and integer values (the corresponding unique integer</span>
<span class="sd">            ids) used to create the user mapping. If not specified, it will be automatically created internally</span>

<span class="sd">    Returns:</span>
<span class="sd">        `Ratings` object instantiated thanks to an existing interaction list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>  <span class="c1"># Does not call __init__</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Ratings</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>  <span class="c1"># Don&#39;t forget to call any polymorphic base class initializers</span>

    <span class="c1"># lists that will contain the original data temporarily</span>
    <span class="c1"># this is so that the conversion from string ids to integers will be called only once</span>
    <span class="c1"># said lists will also be used to create the mappings if not specified in the parameters</span>
    <span class="n">tmp_user_id_column</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_item_id_column</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_score_column</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_timestamp_column</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">interaction</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">interaction_list</span><span class="p">):</span>

        <span class="n">tmp_user_id_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interaction</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">tmp_item_id_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interaction</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">tmp_score_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interaction</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">interaction</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">tmp_timestamp_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmp_timestamp_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

    <span class="c1"># create the item_map from the item_id column if not specified</span>
    <span class="k">if</span> <span class="n">item_map</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">item_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">tmp_item_id_column</span><span class="p">))))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">item_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">item_map</span><span class="p">)</span>

    <span class="c1"># create the user_map from the user_id column if not specified</span>
    <span class="k">if</span> <span class="n">user_map</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">user_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">tmp_user_id_column</span><span class="p">))))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">user_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">user_map</span><span class="p">)</span>

    <span class="n">tmp_user_id_column</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">tmp_user_id_column</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">tmp_user_id_column</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UserNone</span><span class="p">(</span><span class="s1">&#39;User column cannot contain None values&#39;</span><span class="p">)</span>

    <span class="n">tmp_item_id_column</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">tmp_item_id_column</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">tmp_item_id_column</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ItemNone</span><span class="p">(</span><span class="s1">&#39;Item column cannot contain None values&#39;</span><span class="p">)</span>

    <span class="c1"># convert user and item ids and create the uir matrix</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">user_map</span><span class="o">.</span><span class="n">convert_seq_str2int</span><span class="p">(</span><span class="n">tmp_user_id_column</span><span class="p">),</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">item_map</span><span class="o">.</span><span class="n">convert_seq_str2int</span><span class="p">(</span><span class="n">tmp_item_id_column</span><span class="p">),</span>
        <span class="n">tmp_score_column</span><span class="p">,</span> <span class="n">tmp_timestamp_column</span>
    <span class="p">))</span><span class="o">.</span><span class="n">T</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># create the utility dictionary user2rows</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_user2rows</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">user_idx</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">user_idx</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">user_idx</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">unique_user_idx_column</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.from_uir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_uir</span><span class="p">(</span><span class="n">uir</span><span class="p">,</span> <span class="n">user_map</span><span class="p">,</span> <span class="n">item_map</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Class method which allows to instantiate a <code>Ratings</code> object by using an existing uir matrix</p>
<p>The uir matrix should be a two-dimensional numpy ndarray where each row represents a user interaction.
Each row should be in the following format:</p>
<div class="highlight"><pre><span></span><code>[0. 0. 4] or [0. 0. 4 np.nan] (without or with the timestamp)
</code></pre></div>
<p>In the case of a different format for the rows, a ValueError exception will be raised.
Furthermore, if the uir matrix is not of dtype np.float64, a TypeError exception will be raised.</p>
<p>In this case the 'user_map' and 'item_map' parameters <strong><em>MUST</em></strong> be specified, since there is no information
regarding the original string ids in the uir matrix</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">uir_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;u1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;u2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;i1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ratings</span><span class="o">.</span><span class="n">from_uir</span><span class="p">(</span><span class="n">uir_matrix</span><span class="p">,</span> <span class="n">user_map</span><span class="o">=</span><span class="n">user_map</span><span class="p">,</span> <span class="n">item_map</span><span class="o">=</span><span class="n">item_map</span><span class="p">)</span>
</code></pre></div>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>uir</code></td>
          <td class="doc-param-details">
            <p>uir matrix which will be used to create the new <code>Ratings</code> object</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>item_map</code></td>
          <td class="doc-param-details">
            <p>dictionary with string keys (the item ids) and integer values (the corresponding unique integer ids)
used to create the item mapping</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="clayrs.content_analyzer.ratings_manager.ratings.StrIntMap">StrIntMap</span>]</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>user_map</code></td>
          <td class="doc-param-details">
            <p>dictionary with string keys (the user ids) and integer values (the corresponding unique integer
ids) used to create the user mapping</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="clayrs.content_analyzer.ratings_manager.ratings.StrIntMap">StrIntMap</span>]</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-internal" title="clayrs.content_analyzer.ratings_manager.ratings.Ratings" href="#clayrs.content_analyzer.ratings_manager.Ratings">Ratings</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p><code>Ratings</code> object instantiated thanks to an existing uir matrix</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_uir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">uir</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
             <span class="n">user_map</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">StrIntMap</span><span class="p">],</span>
             <span class="n">item_map</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">StrIntMap</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Ratings</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class method which allows to instantiate a `Ratings` object by using an existing uir matrix</span>

<span class="sd">    The uir matrix should be a two-dimensional numpy ndarray where each row represents a user interaction.</span>
<span class="sd">    Each row should be in the following format:</span>

<span class="sd">    ```</span>
<span class="sd">    [0. 0. 4] or [0. 0. 4 np.nan] (without or with the timestamp)</span>
<span class="sd">    ```</span>

<span class="sd">    In the case of a different format for the rows, a ValueError exception will be raised.</span>
<span class="sd">    Furthermore, if the uir matrix is not of dtype np.float64, a TypeError exception will be raised.</span>

<span class="sd">    In this case the &#39;user_map&#39; and &#39;item_map&#39; parameters ***MUST*** be specified, since there is no information</span>
<span class="sd">    regarding the original string ids in the uir matrix</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; uir_matrix = np.array([[0, 0, 4], [1, 0, 3]])</span>
<span class="sd">        &gt;&gt;&gt; user_map = {&#39;u1&#39;: 0, &#39;u2&#39;: 1}</span>
<span class="sd">        &gt;&gt;&gt; item_map = {&#39;i1&#39;: 0}</span>
<span class="sd">        &gt;&gt;&gt; Ratings.from_uir(uir_matrix, user_map=user_map, item_map=item_map)</span>

<span class="sd">    Args:</span>
<span class="sd">        uir: uir matrix which will be used to create the new `Ratings` object</span>
<span class="sd">        item_map: dictionary with string keys (the item ids) and integer values (the corresponding unique integer ids)</span>
<span class="sd">            used to create the item mapping</span>
<span class="sd">        user_map: dictionary with string keys (the user ids) and integer values (the corresponding unique integer</span>
<span class="sd">            ids) used to create the user mapping</span>

<span class="sd">    Returns:</span>
<span class="sd">        `Ratings` object instantiated thanks to an existing uir matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>  <span class="c1"># Does not call __init__</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Ratings</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>  <span class="c1"># Don&#39;t forget to call any polymorphic base class initializers</span>

    <span class="k">if</span> <span class="n">uir</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">uir</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">uir</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;User item ratings matrix should have at least 3 rows &#39;</span>
                             <span class="s1">&#39;(one for users, one for items and one for ratings scores)&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">uir</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">uir</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uir</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">((</span><span class="n">uir</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">),</span> <span class="n">fill_value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">uir</span><span class="o">.</span><span class="n">dtype</span> <span class="o">!=</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;User id columns and item id columns should be mapped to their respective integer&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">uir</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">_uir</span> <span class="o">=</span> <span class="n">uir</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">user_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">user_map</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">item_map</span> <span class="o">=</span> <span class="n">StrIntMap</span><span class="p">(</span><span class="n">item_map</span><span class="p">)</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">_user2rows</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">user_idx</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_uir</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">user_idx</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">user_idx</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">unique_user_idx_column</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.get_user_interactions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_user_interactions</span><span class="p">(</span><span class="n">user_idx</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">as_indices</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method which returns a two-dimensional numpy array containing all the rows from the uir matrix for a single
user, one for each interaction of the user.
Then you can easily access the columns of the resulting array to obtain useful information</p>

<p><strong>Examples:</strong></p>
    <p>So if the rating frame is the following:</p>
<div class="highlight"><pre><span></span><code>+---------+---------+-------+
| user_id | item_id | score |
+---------+---------+-------+
| u1      | i1      |     4 |
| u1      | i2      |     3 |
| u2      | i5      |     1 |
+---------+---------+-------+
</code></pre></div>
<p>The corresponding uir matrix will be the following:</p>
<div class="highlight"><pre><span></span><code>+----------+----------+--------+-----------+
| user_idx | item_idx | score  | timestamp |
+----------+----------+--------+-----------+
| 0.       | 0.       | 4      | np.nan    |
| 0.       | 1.       | 3      | np.nan    |
| 1.       | 4.       | 1      | np.nan    |
+----------+----------+--------+-----------+
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">rating_frame</span><span class="o">.</span><span class="n">get_user_interactions</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">np.ndarray([</span>
<span class="go">    [0. 0. 4 np.nan],</span>
<span class="go">    [0. 1. 3 np.nan],</span>
<span class="go">])</span>
</code></pre></div>
    <p>So you could easily extract all the ratings that a user has given, for example:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">rating_frame</span><span class="o">.</span><span class="n">get_user_interactions</span><span class="p">(</span><span class="mi">0</span><span class="p">)[:,</span> <span class="mi">2</span><span class="p">]</span>
<span class="go">np.ndarray([4,</span>
<span class="go">            3])</span>
</code></pre></div>
    <p>If you only want the first <span class="arithmatex">\(k\)</span> interactions of the user, set <code>head=k</code>. The interactions returned are the
first <span class="arithmatex">\(k\)</span> according to their order of appearance in the rating frame:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">rating_frame</span><span class="o">.</span><span class="n">get_user_interactions</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">np.ndarray([</span>
<span class="go">    [0. 0. 4 np.nan]</span>
<span class="go">])</span>
</code></pre></div>
    <p>If you want to have the indices of the uir matrix corresponding to the user interactions instead of the
actual interactions, set <code>as_indices=True</code>. This will return a numpy array containing the indexes of
the rows of the uir matrix for the interactions of the specified user</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">rating_frame</span><span class="o">.</span><span class="n">get_user_interactions</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">as_indices</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">np.ndarray([0, 1])</span>
</code></pre></div>
    <p>If you don't know the <code>user_idx</code> for a specific user, you can obtain it using the user map as follows:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">user_idx</span> <span class="o">=</span> <span class="n">rating_frame</span><span class="o">.</span><span class="n">user_map</span><span class="p">[</span><span class="s1">&#39;u1&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rating_frame</span><span class="o">.</span><span class="n">get_user_interactions</span><span class="p">(</span><span class="n">user_idx</span><span class="o">=</span><span class="n">user_idx</span><span class="p">)</span>
<span class="go">np.ndarray([</span>
<span class="go">    [0. 0. 4 np.nan],</span>
<span class="go">    [0. 1. 3 np.nan],</span>
<span class="go">])</span>
</code></pre></div>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>user_idx</code></td>
          <td class="doc-param-details">
            <p>Integer id of the user for which you want to retrieve the interactions</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>head</code></td>
          <td class="doc-param-details">
            <p>Integer which will cut the list of interactions of the user returned. The interactions returned are
the first <span class="arithmatex">\(k\)</span> according to their order of appearance</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>as_indices</code></td>
          <td class="doc-param-details">
            <p>Instead of returning the user interactions, the indices of the rows in the uir matrix
corresponding to interactions for the specified user will be returned</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>False</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="numpy" href="https://numpy.org/doc/stable/reference/index.html#module-numpy">np</a>.<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>If <code>as_indices=False</code>, numpy ndarray containing the rows from the uir matrix for the specified user,
otherwise numpy array containing the indexes of the rows from the uir matrix for the interactions of the
specified user</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_user_interactions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">head</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">as_indices</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method which returns a two-dimensional numpy array containing all the rows from the uir matrix for a single</span>
<span class="sd">    user, one for each interaction of the user.</span>
<span class="sd">    Then you can easily access the columns of the resulting array to obtain useful information</span>

<span class="sd">    Examples:</span>

<span class="sd">        So if the rating frame is the following:</span>

<span class="sd">        ```</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | user_id | item_id | score |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | u1      | i1      |     4 |</span>
<span class="sd">        | u1      | i2      |     3 |</span>
<span class="sd">        | u2      | i5      |     1 |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        ```</span>

<span class="sd">        The corresponding uir matrix will be the following:</span>

<span class="sd">        ```</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | user_idx | item_idx | score  | timestamp |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | 0.       | 0.       | 4      | np.nan    |</span>
<span class="sd">        | 0.       | 1.       | 3      | np.nan    |</span>
<span class="sd">        | 1.       | 4.       | 1      | np.nan    |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        ```</span>

<span class="sd">        &gt;&gt;&gt; rating_frame.get_user_interactions(0)</span>
<span class="sd">        np.ndarray([</span>
<span class="sd">            [0. 0. 4 np.nan],</span>
<span class="sd">            [0. 1. 3 np.nan],</span>
<span class="sd">        ])</span>

<span class="sd">        So you could easily extract all the ratings that a user has given, for example:</span>

<span class="sd">        &gt;&gt;&gt; rating_frame.get_user_interactions(0)[:, 2]</span>
<span class="sd">        np.ndarray([4,</span>
<span class="sd">                    3])</span>

<span class="sd">        If you only want the first $k$ interactions of the user, set `head=k`. The interactions returned are the</span>
<span class="sd">        first $k$ according to their order of appearance in the rating frame:</span>

<span class="sd">        &gt;&gt;&gt; rating_frame.get_user_interactions(0, head=1)</span>
<span class="sd">        np.ndarray([</span>
<span class="sd">            [0. 0. 4 np.nan]</span>
<span class="sd">        ])</span>

<span class="sd">        If you want to have the indices of the uir matrix corresponding to the user interactions instead of the</span>
<span class="sd">        actual interactions, set `as_indices=True`. This will return a numpy array containing the indexes of</span>
<span class="sd">        the rows of the uir matrix for the interactions of the specified user</span>

<span class="sd">        &gt;&gt;&gt; rating_frame.get_user_interactions(0, as_indices=True)</span>
<span class="sd">        np.ndarray([0, 1])</span>

<span class="sd">        If you don&#39;t know the `user_idx` for a specific user, you can obtain it using the user map as follows:</span>

<span class="sd">        &gt;&gt;&gt; user_idx = rating_frame.user_map[&#39;u1&#39;]</span>
<span class="sd">        &gt;&gt;&gt; rating_frame.get_user_interactions(user_idx=user_idx)</span>
<span class="sd">        np.ndarray([</span>
<span class="sd">            [0. 0. 4 np.nan],</span>
<span class="sd">            [0. 1. 3 np.nan],</span>
<span class="sd">        ])</span>

<span class="sd">    Args:</span>
<span class="sd">        user_idx: Integer id of the user for which you want to retrieve the interactions</span>
<span class="sd">        head: Integer which will cut the list of interactions of the user returned. The interactions returned are</span>
<span class="sd">            the first $k$ according to their order of appearance</span>
<span class="sd">        as_indices: Instead of returning the user interactions, the indices of the rows in the uir matrix</span>
<span class="sd">            corresponding to interactions for the specified user will be returned</span>

<span class="sd">    Returns:</span>
<span class="sd">        If `as_indices=False`, numpy ndarray containing the rows from the uir matrix for the specified user,</span>
<span class="sd">            otherwise numpy array containing the indexes of the rows from the uir matrix for the interactions of the</span>
<span class="sd">            specified user</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user2rows</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user_idx</span><span class="p">,</span> <span class="p">[])[:</span><span class="n">head</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">user_rows</span> <span class="k">if</span> <span class="n">as_indices</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uir</span><span class="p">[</span><span class="n">user_rows</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.take_head_all" class="doc doc-heading">
<code class="highlight language-python"><span class="n">take_head_all</span><span class="p">(</span><span class="n">head</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method which will retain only <span class="arithmatex">\(k\)</span> interactions for each user. The <span class="arithmatex">\(k\)</span> interactions retained are the first which
appear in the rating frame.</p>
<p>This method will return a new <code>Ratings</code> object without changing the original</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><span class="filename">Starting Rating object</span><pre><span></span><code>+---------+---------+-------+
| user_id | item_id | score |
+---------+---------+-------+
| u1      | i1      |     4 |
| u1      | i2      |     3 |
| u2      | i5      |     1 |
| u2      | i6      |     2 |
+---------+---------+-------+
</code></pre></div>
<div class="highlight"><span class="filename">Starting Rating object: corresponding uir matrix</span><pre><span></span><code>+----------+----------+--------+-----------+
| user_idx | item_idx | score  | timestamp |
+----------+----------+--------+-----------+
| 0.       | 0.       | 4      | np.nan    |
| 0.       | 1.       | 3      | np.nan    |
| 1.       | 4.       | 1      | np.nan    |
| 1.       | 5.       | 2      | np.nan    |
+----------+----------+--------+-----------+
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">rating_frame</span><span class="o">.</span><span class="n">take_head_all</span><span class="p">(</span><span class="n">head</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
    <div class="highlight"><span class="filename">Returned Rating object</span><pre><span></span><code>+---------+---------+-------+
| user_id | item_id | score |
+---------+---------+-------+
| u1      | i1      |     4 |
| u2      | i5      |     1 |
+---------+---------+-------+
</code></pre></div>
<div class="highlight"><span class="filename">Returned Rating object: corresponding uir matrix</span><pre><span></span><code>+----------+----------+--------+-----------+
| user_idx | item_idx | score  | timestamp |
+----------+----------+--------+-----------+
| 0.       | 0.       | 4      | np.nan    |
| 1.       | 4.       | 1      | np.nan    |
+----------+----------+--------+-----------+
</code></pre></div>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>head</code></td>
          <td class="doc-param-details">
            <p>The number of interactions to retain for each user</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-internal" title="clayrs.content_analyzer.ratings_manager.ratings.Ratings" href="#clayrs.content_analyzer.ratings_manager.Ratings">Ratings</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>The filtered Ratings object which contains only first <span class="arithmatex">\(k\)</span> interactions for each user</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">take_head_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Ratings</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method which will retain only $k$ interactions for each user. The $k$ interactions retained are the first which</span>
<span class="sd">    appear in the rating frame.</span>

<span class="sd">    This method will return a new `Ratings` object without changing the original</span>

<span class="sd">    Examples:</span>

<span class="sd">        ```title=&quot;Starting Rating object&quot;</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | user_id | item_id | score |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | u1      | i1      |     4 |</span>
<span class="sd">        | u1      | i2      |     3 |</span>
<span class="sd">        | u2      | i5      |     1 |</span>
<span class="sd">        | u2      | i6      |     2 |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        ```</span>

<span class="sd">        ```title=&quot;Starting Rating object: corresponding uir matrix&quot;</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | user_idx | item_idx | score  | timestamp |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | 0.       | 0.       | 4      | np.nan    |</span>
<span class="sd">        | 0.       | 1.       | 3      | np.nan    |</span>
<span class="sd">        | 1.       | 4.       | 1      | np.nan    |</span>
<span class="sd">        | 1.       | 5.       | 2      | np.nan    |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        ```</span>

<span class="sd">        &gt;&gt;&gt; rating_frame.take_head_all(head=1)</span>

<span class="sd">        ```title=&quot;Returned Rating object&quot;</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | user_id | item_id | score |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        | u1      | i1      |     4 |</span>
<span class="sd">        | u2      | i5      |     1 |</span>
<span class="sd">        +---------+---------+-------+</span>
<span class="sd">        ```</span>

<span class="sd">        ```title=&quot;Returned Rating object: corresponding uir matrix&quot;</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | user_idx | item_idx | score  | timestamp |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        | 0.       | 0.       | 4      | np.nan    |</span>
<span class="sd">        | 1.       | 4.       | 1      | np.nan    |</span>
<span class="sd">        +----------+----------+--------+-----------+</span>
<span class="sd">        ```</span>

<span class="sd">    Args:</span>
<span class="sd">        head: The number of interactions to retain for each user</span>

<span class="sd">    Returns:</span>
<span class="sd">        The filtered Ratings object which contains only first $k$ interactions for each user</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cut_rows</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">rows</span><span class="p">[:</span><span class="n">head</span><span class="p">]</span> <span class="k">for</span> <span class="n">rows</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user2rows</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
    <span class="n">new_uir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uir</span><span class="p">[</span><span class="n">cut_rows</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">Ratings</span><span class="o">.</span><span class="n">from_uir</span><span class="p">(</span><span class="n">new_uir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_map</span><span class="o">.</span><span class="n">map</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_map</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.to_csv" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_csv</span><span class="p">(</span><span class="n">output_directory</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;ratings_frame&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ids_as_str</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method which will save the <code>Ratings</code> object to a <code>csv</code> file</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>output_directory</code></td>
          <td class="doc-param-details">
            <p>directory which will contain the csv file</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>&#39;.&#39;</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>file_name</code></td>
          <td class="doc-param-details">
            <p>Name of the csv_file</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>&#39;ratings_frame&#39;</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>overwrite</code></td>
          <td class="doc-param-details">
            <p>If set to True and a csv file exists in the same output directory with the same file name, it
will be overwritten</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>False</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>ids_as_str</code></td>
          <td class="doc-param-details">
            <p>If True the original string ids for users and items will be used, otherwise their integer ids</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>True</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_directory</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;ratings_frame&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">ids_as_str</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method which will save the `Ratings` object to a `csv` file</span>

<span class="sd">    Args:</span>
<span class="sd">        output_directory: directory which will contain the csv file</span>
<span class="sd">        file_name: Name of the csv_file</span>
<span class="sd">        overwrite: If set to True and a csv file exists in the same output directory with the same file name, it</span>
<span class="sd">            will be overwritten</span>
<span class="sd">        ids_as_str: If True the original string ids for users and items will be used, otherwise their integer ids</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Path</span><span class="p">(</span><span class="n">output_directory</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">file_name</span> <span class="o">=</span> <span class="n">get_valid_filename</span><span class="p">(</span><span class="n">output_directory</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;csv&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>

    <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">ids_as_str</span><span class="o">=</span><span class="n">ids_as_str</span><span class="p">)</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_directory</span><span class="p">,</span> <span class="n">file_name</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.content_analyzer.ratings_manager.ratings.Ratings.to_dataframe" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_dataframe</span><span class="p">(</span><span class="n">ids_as_str</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method which will convert the <code>Rating</code> object to a <code>pandas DataFrame object</code>.</p>
<p>The returned DataFrame object will contain the 'user_id', 'item_id' and 'score' column and optionally the
'timestamp' column, if at least one interaction has a timestamp.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ids_as_str</code></td>
          <td class="doc-param-details">
            <p>If True, the original string ids for users and items will be used, otherwise their integer ids</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>True</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="pandas" href="https://pandas.pydata.org/docs/index.html#module-pandas">pd</a>.<a class="autorefs autorefs-external" title="pandas.DataFrame" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame">DataFrame</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>The rating frame converted to a pandas DataFrame with 'user_id', 'item_id', 'score' column and optionally
the 'timestamp' column</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/content_analyzer/ratings_manager/ratings.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids_as_str</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method which will convert the `Rating` object to a `pandas DataFrame object`.</span>

<span class="sd">    The returned DataFrame object will contain the &#39;user_id&#39;, &#39;item_id&#39; and &#39;score&#39; column and optionally the</span>
<span class="sd">    &#39;timestamp&#39; column, if at least one interaction has a timestamp.</span>

<span class="sd">    Args:</span>
<span class="sd">        ids_as_str: If True, the original string ids for users and items will be used, otherwise their integer ids</span>

<span class="sd">    Returns:</span>
<span class="sd">        The rating frame converted to a pandas DataFrame with &#39;user_id&#39;, &#39;item_id&#39;, &#39;score&#39; column and optionally</span>
<span class="sd">            the &#39;timestamp&#39; column</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ids_as_str</span><span class="p">:</span>
        <span class="n">will_be_frame</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_id_column</span><span class="p">,</span>
                         <span class="s1">&#39;item_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_id_column</span><span class="p">,</span>
                         <span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_column</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">will_be_frame</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_idx_column</span><span class="p">,</span>
                         <span class="s1">&#39;item_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_idx_column</span><span class="p">,</span>
                         <span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_column</span><span class="p">}</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp_column</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">will_be_frame</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp_column</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">will_be_frame</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Documentation made by Antonio Silletti
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/swapUniba" target="_blank" rel="noopener" title="Swap Uniba on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.tooltips", "navigation.tabs", "navigation.top", "navigation.sections", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.2a6f1dda.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>