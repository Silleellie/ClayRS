
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../images/icon_no_borders.svg">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.16">
    
    
      
        <title>Plot metrics - ClayRS documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.1c3799f8.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#plot-metrics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ClayRS documentation" class="md-header__button md-logo" aria-label="ClayRS documentation" data-md-component="logo">
      
  <img src="../../../images/icon_no_borders.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ClayRS documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Plot metrics
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/swapUniba/ClayRS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    swapUniba/ClayRS
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../first_steps/installation/" class="md-tabs__link">
        First steps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../content_analyzer/introduction/" class="md-tabs__link">
        Content Analyzer
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../recsys/introduction/" class="md-tabs__link">
        Recsys
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../introduction/" class="md-tabs__link md-tabs__link--active">
        Evaluation
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ClayRS documentation" class="md-nav__button md-logo" aria-label="ClayRS documentation" data-md-component="logo">
      
  <img src="../../../images/icon_no_borders.svg" alt="logo">

    </a>
    ClayRS documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/swapUniba/ClayRS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    swapUniba/ClayRS
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          First steps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="First steps" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          First steps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../first_steps/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../first_steps/quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Content Analyzer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Content Analyzer" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Content Analyzer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../content_analyzer/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../content_analyzer/ratings/" class="md-nav__link">
        Ratings
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Recsys
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Recsys" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Recsys
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recsys/recsys/" class="md-nav__link">
        RecSys
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Evaluation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Evaluation" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Evaluation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../eval_model/" class="md-nav__link">
        EvalModel class
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          Metrics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Metrics" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Metrics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../classification_metrics/" class="md-nav__link">
        Classification metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ranking_metrics/" class="md-nav__link">
        Ranking metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../error_metrics/" class="md-nav__link">
        Error metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fairness_metrics/" class="md-nav__link">
        Fairness metrics
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Plot metrics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Plot metrics
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.LongTailDistr" class="md-nav__link">
    LongTailDistr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopProfileVsRecs" class="md-nav__link">
    PopProfileVsRecs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation" class="md-nav__link">
    PopRecsCorrelation
  </a>
  
    <nav class="md-nav" aria-label="PopRecsCorrelation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_no_zeros_plot" class="md-nav__link">
    build_no_zeros_plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_plot" class="md-nav__link">
    build_plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_w_zeros_plot" class="md-nav__link">
    build_w_zeros_plot()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Statistical tests
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Statistical tests" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Statistical tests
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../eval_model/" class="md-nav__link">
        Wilcoxon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../eval_model/" class="md-nav__link">
        Ttest
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.LongTailDistr" class="md-nav__link">
    LongTailDistr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopProfileVsRecs" class="md-nav__link">
    PopProfileVsRecs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation" class="md-nav__link">
    PopRecsCorrelation
  </a>
  
    <nav class="md-nav" aria-label="PopRecsCorrelation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_no_zeros_plot" class="md-nav__link">
    build_no_zeros_plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_plot" class="md-nav__link">
    build_plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_w_zeros_plot" class="md-nav__link">
    build_w_zeros_plot()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/swapUniba/ClayRS/edit/master/docs/evaluation/metrics/plot_metrics.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="plot-metrics">Plot metrics</h1>


<div class="doc doc-object doc-module">



  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="clayrs.evaluation.metrics.plot_metrics.LongTailDistr" class="doc doc-heading">
        <code>LongTailDistr</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="clayrs.evaluation.metrics.plot_metrics.PlotMetric">PlotMetric</span></code></p>

  
      <p>This metric generates the Long Tail Distribution plot and saves it in the output directory with the file name
specified. The plot can be generated both for the <em>truth set</em> or the <em>predictions set</em> (based on
the <em>on</em> parameter):</p>
<ul>
<li>
<p><strong>on = 'truth'</strong>: in this case the long tail distribution is useful to see which are the most popular items (the
  most rated ones)</p>
</li>
<li>
<p><strong>on = 'pred'</strong>: in this case the long tail distribution is useful to see which are the most recommended items</p>
</li>
</ul>
<p>The plot file will be saved as <em>out_dir/file_name.format</em></p>
<p>Since multiple split could be evaluated at once, the <em>overwrite</em> parameter comes into play:
if is set to False, file with the same name will be saved as <em>file_name (1).format</em>, <em>file_name (2).format</em>, etc.
so that for every split a plot is generated without overwriting any file previously generated</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>out_dir</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Directory where the plot will be saved. Default is '.', meaning that the plot will be saved
in the same directory where the python script it's being executed</p></td>
          <td>
                <code>&#39;.&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Name of the plot file. Default is 'long_tail_distr'</p></td>
          <td>
                <code>&#39;long_tail_distr&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>on</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Set on which the Long Tail Distribution plot will be generated. Values accepted are 'truth' or 'pred'</p></td>
          <td>
                <code>&#39;truth&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>format</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Format of the plot file. Could be 'jpg', 'svg', 'png'. Default is 'png'</p></td>
          <td>
                <code>&#39;png&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>overwrite</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>parameter which specifies if the plot saved must overwrite any file that as the same name
('file_name.format'). Default is False</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>exception raised when a invalid value for the 'on' parameter is specified</p></td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>clayrs/evaluation/metrics/plot_metrics.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LongTailDistr</span><span class="p">(</span><span class="n">PlotMetric</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This metric generates the Long Tail Distribution plot and saves it in the output directory with the file name</span>
<span class="sd">    specified. The plot can be generated both for the *truth set* or the *predictions set* (based on</span>
<span class="sd">    the *on* parameter):</span>

<span class="sd">    - **on = &#39;truth&#39;**: in this case the long tail distribution is useful to see which are the most popular items (the</span>
<span class="sd">      most rated ones)</span>

<span class="sd">    - **on = &#39;pred&#39;**: in this case the long tail distribution is useful to see which are the most recommended items</span>

<span class="sd">    The plot file will be saved as *out_dir/file_name.format*</span>

<span class="sd">    Since multiple split could be evaluated at once, the *overwrite* parameter comes into play:</span>
<span class="sd">    if is set to False, file with the same name will be saved as *file_name (1).format*, *file_name (2).format*, etc.</span>
<span class="sd">    so that for every split a plot is generated without overwriting any file previously generated</span>

<span class="sd">    Args:</span>
<span class="sd">        out_dir (str): Directory where the plot will be saved. Default is &#39;.&#39;, meaning that the plot will be saved</span>
<span class="sd">            in the same directory where the python script it&#39;s being executed</span>
<span class="sd">        file_name (str): Name of the plot file. Default is &#39;long_tail_distr&#39;</span>
<span class="sd">        on (str): Set on which the Long Tail Distribution plot will be generated. Values accepted are &#39;truth&#39; or &#39;pred&#39;</span>
<span class="sd">        format (str): Format of the plot file. Could be &#39;jpg&#39;, &#39;svg&#39;, &#39;png&#39;. Default is &#39;png&#39;</span>
<span class="sd">        overwrite (bool): parameter which specifies if the plot saved must overwrite any file that as the same name</span>
<span class="sd">            (&#39;file_name.format&#39;). Default is False</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: exception raised when a invalid value for the &#39;on&#39; parameter is specified</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;long_tail_distr&#39;</span><span class="p">,</span> <span class="n">on</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;truth&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span>
                 <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;truth&#39;</span><span class="p">,</span> <span class="s1">&#39;pred&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__on</span> <span class="o">=</span> <span class="n">on</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__on</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;on=</span><span class="si">{}</span><span class="s2"> is not supported! Long Tail can be calculated only on:</span><span class="se">\n</span><span class="s2">&quot;</span>
                             <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">on</span><span class="p">,</span> <span class="n">valid</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;LongTailDistr&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;LongTailDistr(out_dir=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__out_dir</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;file_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__file_name</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;format=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__format</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;overwrite=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__overwrite</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">split</span><span class="p">:</span> <span class="n">Split</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__on</span> <span class="o">==</span> <span class="s1">&#39;truth&#39;</span><span class="p">:</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">split</span><span class="o">.</span><span class="n">truth</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">split</span><span class="o">.</span><span class="n">pred</span>

        <span class="n">counts_by_item</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">item_id_column</span><span class="p">)</span>
        <span class="n">ordered_item_count_pairs</span> <span class="o">=</span> <span class="n">counts_by_item</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>

        <span class="n">ordered_counts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item_count_pair</span> <span class="ow">in</span> <span class="n">ordered_item_count_pairs</span><span class="p">:</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item_count_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">ordered_counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item_count_pair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">ordered_counts</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__on</span> <span class="o">==</span> <span class="s1">&#39;truth&#39;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Item ID&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;# of item ratings&#39;</span><span class="p">,</span>
                   <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Long Tail Distribution - </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__on</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Item ID&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;# of item recommendations&#39;</span><span class="p">,</span>
                   <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Long Tail Distribution - </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__on</span><span class="p">))</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_name</span> <span class="o">+</span> <span class="s1">&#39;_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__on</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="n">file_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;item_id&#39;</span><span class="p">,</span> <span class="s1">&#39;score&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="clayrs.evaluation.metrics.plot_metrics.PopProfileVsRecs" class="doc doc-heading">
        <code>PopProfileVsRecs</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="clayrs.evaluation.metrics.fairness_metrics.GroupFairnessMetric">GroupFairnessMetric</span></code>, <code><span title="clayrs.evaluation.metrics.plot_metrics.PlotMetric">PlotMetric</span></code></p>

  
      <p>This metric generates a plot where users are splitted into groups and, for every group, a boxplot comparing
profile popularity and recommendations popularity is drawn</p>
<p>Users are splitted into groups based on the <em>user_groups</em> parameter, which contains names of the groups as keys,
and percentage of how many user must contain a group as values. For example::</p>
<div class="highlight"><pre><span></span><code>user_groups = {&#39;popular_users&#39;: 0.3, &#39;medium_popular_users&#39;: 0.2, &#39;low_popular_users&#39;: 0.5}
</code></pre></div>
<p>Every user will be inserted in a group based on how many popular items the user has rated (in relation to the
percentage of users we specified as value in the dictionary):
users with many popular items will be inserted into the first group, users with niche items rated will be inserted
into one of the last groups</p>
<p>You could also specify how many <em>most popular items</em> must be considered with the 'pop_percentage' parameter. By
default is set to 0.2 which means that the top 20% items are considered as most popular</p>
<p>The plot file will be saved as <em>out_dir/file_name.format</em></p>
<p>Since multiple split could be evaluated at once, the <em>overwrite</em> parameter comes into play:
if is set to False, file with the same name will be saved as <em>file_name (1).format</em>, <em>file_name (2).format</em>, etc.
so that for every split a plot is generated without overwriting any file previously generated</p>
<p>Thanks to the 'store_frame' parameter it's also possible to store a csv containing the calculations done in order
to build every boxplot. Will be saved in the same directory and with the same file name as the plot itself (but
with the .csv format):</p>
<p>The csv will be saved as <em>out_dir/file_name.csv</em></p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>user_groups</code></td>
          <td>
                <code>Dict&lt;str, float&gt;</code>
          </td>
          <td><p>Dict containing group names as keys and percentage of users as value, used to
split users in groups. Users with more popular items rated are grouped into the first group, users with
slightly less popular items rated are grouped into the second one, etc.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>out_dir</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Directory where the plot will be saved. Default is '.', meaning that the plot will be saved
in the same directory where the python script it's being executed</p></td>
          <td>
                <code>&#39;.&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Name of the plot file. Default is 'pop_ratio_profile_vs_recs'</p></td>
          <td>
                <code>&#39;pop_ratio_profile_vs_recs&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>pop_percentage</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>How many (in percentage) 'most popular items' must be considered. Default is 0.2</p></td>
          <td>
                <code>0.2</code>
          </td>
        </tr>
        <tr>
          <td><code>store_frame</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>True if you want to store calculations done in order to build every boxplot in a csv file,
False otherwise. Default is set to False</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>format</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Format of the plot file. Could be 'jpg', 'svg', 'png'. Default is 'png'</p></td>
          <td>
                <code>&#39;png&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>overwrite</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>parameter which specifies if the plot saved must overwrite any file that as the same name
('file_name.format'). Default is False</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>clayrs/evaluation/metrics/plot_metrics.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PopProfileVsRecs</span><span class="p">(</span><span class="n">GroupFairnessMetric</span><span class="p">,</span> <span class="n">PlotMetric</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This metric generates a plot where users are splitted into groups and, for every group, a boxplot comparing</span>
<span class="sd">    profile popularity and recommendations popularity is drawn</span>

<span class="sd">    Users are splitted into groups based on the *user_groups* parameter, which contains names of the groups as keys,</span>
<span class="sd">    and percentage of how many user must contain a group as values. For example::</span>

<span class="sd">        user_groups = {&#39;popular_users&#39;: 0.3, &#39;medium_popular_users&#39;: 0.2, &#39;low_popular_users&#39;: 0.5}</span>

<span class="sd">    Every user will be inserted in a group based on how many popular items the user has rated (in relation to the</span>
<span class="sd">    percentage of users we specified as value in the dictionary):</span>
<span class="sd">    users with many popular items will be inserted into the first group, users with niche items rated will be inserted</span>
<span class="sd">    into one of the last groups</span>

<span class="sd">    You could also specify how many *most popular items* must be considered with the &#39;pop_percentage&#39; parameter. By</span>
<span class="sd">    default is set to 0.2 which means that the top 20% items are considered as most popular</span>

<span class="sd">    The plot file will be saved as *out_dir/file_name.format*</span>

<span class="sd">    Since multiple split could be evaluated at once, the *overwrite* parameter comes into play:</span>
<span class="sd">    if is set to False, file with the same name will be saved as *file_name (1).format*, *file_name (2).format*, etc.</span>
<span class="sd">    so that for every split a plot is generated without overwriting any file previously generated</span>

<span class="sd">    Thanks to the &#39;store_frame&#39; parameter it&#39;s also possible to store a csv containing the calculations done in order</span>
<span class="sd">    to build every boxplot. Will be saved in the same directory and with the same file name as the plot itself (but</span>
<span class="sd">    with the .csv format):</span>

<span class="sd">    The csv will be saved as *out_dir/file_name.csv*</span>


<span class="sd">    Args:</span>
<span class="sd">        user_groups (Dict&lt;str, float&gt;): Dict containing group names as keys and percentage of users as value, used to</span>
<span class="sd">            split users in groups. Users with more popular items rated are grouped into the first group, users with</span>
<span class="sd">            slightly less popular items rated are grouped into the second one, etc.</span>
<span class="sd">        out_dir (str): Directory where the plot will be saved. Default is &#39;.&#39;, meaning that the plot will be saved</span>
<span class="sd">            in the same directory where the python script it&#39;s being executed</span>
<span class="sd">        file_name (str): Name of the plot file. Default is &#39;pop_ratio_profile_vs_recs&#39;</span>
<span class="sd">        pop_percentage (float): How many (in percentage) &#39;most popular items&#39; must be considered. Default is 0.2</span>
<span class="sd">        store_frame (bool): True if you want to store calculations done in order to build every boxplot in a csv file,</span>
<span class="sd">            False otherwise. Default is set to False</span>
<span class="sd">        format (str): Format of the plot file. Could be &#39;jpg&#39;, &#39;svg&#39;, &#39;png&#39;. Default is &#39;png&#39;</span>
<span class="sd">        overwrite (bool): parameter which specifies if the plot saved must overwrite any file that as the same name</span>
<span class="sd">            (&#39;file_name.format&#39;). Default is False</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_groups</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">out_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span>
                 <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;pop_ratio_profile_vs_recs&#39;</span><span class="p">,</span> <span class="n">pop_percentage</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
                 <span class="n">store_frame</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

        <span class="n">PlotMetric</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>
        <span class="n">GroupFairnessMetric</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_groups</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">pop_percentage</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Incorrect percentage! Valid percentage range: 0 &lt; percentage &lt;= 1&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__pop_percentage</span> <span class="o">=</span> <span class="n">pop_percentage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__user_groups</span> <span class="o">=</span> <span class="n">user_groups</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__store_frame</span> <span class="o">=</span> <span class="n">store_frame</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;PopProfileVsRecs&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;PopProfileVsRecs(&#39;</span>\
               <span class="sa">f</span><span class="s1">&#39;user_groups=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__user_groups</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;out_dir=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;file_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_name</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;pop_percentage=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__pop_percentage</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;store_frame=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__store_frame</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;format=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;overwrite=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">split</span><span class="p">:</span> <span class="n">Split</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="n">predictions</span> <span class="o">=</span> <span class="n">split</span><span class="o">.</span><span class="n">pred</span>
        <span class="n">truth</span> <span class="o">=</span> <span class="n">split</span><span class="o">.</span><span class="n">truth</span>

        <span class="n">most_popular_items</span> <span class="o">=</span> <span class="n">popular_items</span><span class="p">(</span><span class="n">score_frame</span><span class="o">=</span><span class="n">truth</span><span class="p">,</span> <span class="n">pop_percentage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__pop_percentage</span><span class="p">)</span>
        <span class="n">user_groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">split_user_in_groups</span><span class="p">(</span><span class="n">score_frame</span><span class="o">=</span><span class="n">predictions</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_groups</span><span class="p">,</span>
                                                <span class="n">pop_items</span><span class="o">=</span><span class="n">most_popular_items</span><span class="p">)</span>

        <span class="n">split_result</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_group&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;profile_pop_ratio&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;recs_pop_ratio&#39;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="n">data_to_plot</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">group_name</span> <span class="ow">in</span> <span class="n">user_groups</span><span class="p">:</span>
            <span class="n">truth_group</span> <span class="o">=</span> <span class="n">truth</span><span class="o">.</span><span class="n">filter_ratings</span><span class="p">(</span><span class="n">user_list</span><span class="o">=</span><span class="n">user_groups</span><span class="p">[</span><span class="n">group_name</span><span class="p">])</span>
            <span class="n">pred_group</span> <span class="o">=</span> <span class="n">predictions</span><span class="o">.</span><span class="n">filter_ratings</span><span class="p">(</span><span class="n">user_list</span><span class="o">=</span><span class="n">user_groups</span><span class="p">[</span><span class="n">group_name</span><span class="p">])</span>

            <span class="n">profile_pop_ratios_frame</span> <span class="o">=</span> <span class="n">pop_ratio_by_user</span><span class="p">(</span><span class="n">truth_group</span><span class="p">,</span> <span class="n">most_popular_items</span><span class="p">)</span>
            <span class="n">recs_pop_ratios_frame</span> <span class="o">=</span> <span class="n">pop_ratio_by_user</span><span class="p">(</span><span class="n">pred_group</span><span class="p">,</span> <span class="n">most_popular_items</span><span class="p">)</span>

            <span class="n">profile_pop_ratios</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">profile_pop_ratios_frame</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">recs_pop_ratios</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">recs_pop_ratios_frame</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

            <span class="n">split_result</span><span class="p">[</span><span class="s1">&#39;user_group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group_name</span><span class="p">)</span>
            <span class="n">split_result</span><span class="p">[</span><span class="s1">&#39;profile_pop_ratio&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">profile_pop_ratios</span><span class="p">)</span>
            <span class="n">split_result</span><span class="p">[</span><span class="s1">&#39;recs_pop_ratio&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recs_pop_ratios</span><span class="p">)</span>

            <span class="n">profile_data</span> <span class="o">=</span> <span class="n">profile_pop_ratios</span>
            <span class="n">data_to_plot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">profile_data</span><span class="p">)</span>
            <span class="n">recs_data</span> <span class="o">=</span> <span class="n">recs_pop_ratios</span>
            <span class="n">data_to_plot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recs_data</span><span class="p">)</span>

            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">group&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">group_name</span><span class="p">))</span>

        <span class="c1"># agg backend is used to create plot as a .png file</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;agg&#39;</span><span class="p">)</span>

        <span class="c1"># Create a figure instance</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

        <span class="c1"># Create an axes instance</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Popularity ratio Profile vs Recs&#39;</span><span class="p">)</span>

        <span class="c1"># add patch_artist=True option to ax.boxplot()</span>
        <span class="c1"># to get fill color</span>
        <span class="n">bp</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_to_plot</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">),</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">first_color</span> <span class="o">=</span> <span class="s1">&#39;#7570b3&#39;</span>
        <span class="n">second_color</span> <span class="o">=</span> <span class="s1">&#39;#b2df8a&#39;</span>
        <span class="n">fill_color_profile</span> <span class="o">=</span> <span class="s1">&#39;#004e98&#39;</span>
        <span class="n">fill_color_recs</span> <span class="o">=</span> <span class="s1">&#39;#ff6700&#39;</span>

        <span class="c1"># change outline color, fill color and linewidth of the boxes</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">box</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bp</span><span class="p">[</span><span class="s1">&#39;boxes&#39;</span><span class="p">]):</span>
            <span class="c1"># change outline color</span>
            <span class="n">box</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">first_color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="c1"># change fill color</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">box</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="n">fill_color_profile</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">box</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="n">fill_color_recs</span><span class="p">)</span>

        <span class="c1"># change color and linewidth of the whiskers</span>
        <span class="k">for</span> <span class="n">whisker</span> <span class="ow">in</span> <span class="n">bp</span><span class="p">[</span><span class="s1">&#39;whiskers&#39;</span><span class="p">]:</span>
            <span class="n">whisker</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">first_color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># change color and linewidth of the caps</span>
        <span class="k">for</span> <span class="n">cap</span> <span class="ow">in</span> <span class="n">bp</span><span class="p">[</span><span class="s1">&#39;caps&#39;</span><span class="p">]:</span>
            <span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">first_color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># change color and linewidth of the medians</span>
        <span class="k">for</span> <span class="n">median</span> <span class="ow">in</span> <span class="n">bp</span><span class="p">[</span><span class="s1">&#39;medians&#39;</span><span class="p">]:</span>
            <span class="n">median</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">second_color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># change the style of fliers and their fill</span>
        <span class="k">for</span> <span class="n">flier</span> <span class="ow">in</span> <span class="n">bp</span><span class="p">[</span><span class="s1">&#39;fliers&#39;</span><span class="p">]:</span>
            <span class="n">flier</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#e7298a&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="c1"># x ticks minor contains the vertical lines for better separate the various groups</span>
        <span class="c1"># a vertical line is 0.5 at the left of the first profile boxplot and another vertical line is at 0.5 of the</span>
        <span class="c1"># second boxplot for each group</span>
        <span class="n">xticks_minor_tuples</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bp</span><span class="p">[</span><span class="s1">&#39;boxes&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
        <span class="n">xticks_minor</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">xticks_minor_tuples</span><span class="p">))</span>

        <span class="c1"># x ticks contains the &quot;middle point&quot; between the profile boxplot and recs boxplot</span>
        <span class="c1"># for each group</span>
        <span class="n">x_ticks</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bp</span><span class="p">[</span><span class="s1">&#39;boxes&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x_ticks</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks_minor</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

        <span class="c1"># make x_ticks_minor bigger, they are basically the vertical lines</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;minor&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
        <span class="c1"># remove the tick and show only the label for the main ticks</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Remove top axes and right axes ticks</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">tick_bottom</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>

        <span class="c1"># create the legend</span>
        <span class="n">profile_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">fill_color_profile</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Profile popularity&#39;</span><span class="p">)</span>
        <span class="n">recs_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">fill_color_recs</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Recs popularity&#39;</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">profile_patch</span><span class="p">,</span> <span class="n">recs_patch</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper center&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">))</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="n">file_name</span><span class="p">)</span>

        <span class="n">score_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">split_result</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__store_frame</span><span class="p">:</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">get_valid_filename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;csv&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
            <span class="n">score_frame</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span><span class="p">,</span> <span class="n">file_name</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;item_id&#39;</span><span class="p">,</span> <span class="s1">&#39;score&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation" class="doc doc-heading">
        <code>PopRecsCorrelation</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="clayrs.evaluation.metrics.plot_metrics.PlotMetric">PlotMetric</span></code></p>

  
      <p>This metric generates a plot which has as the X-axis the popularity and as Y-axis number of recommendations, so
that it can be easily seen the correlation between popular (niche) items and how many times are being recommended
by the recsys</p>
<p>The plot file will be saved as <em>out_dir/file_name.format</em></p>
<p>Since multiple split could be evaluated at once, the <em>overwrite</em> parameter comes into play:
if is set to False, file with the same name will be saved as <em>file_name (1).format</em>, <em>file_name (2).format</em>, etc.
so that for every split a plot is generated without overwriting any file previously generated</p>
<p>There exists cases in which some items are not recommended even once, so in the graph could appear
<strong>zero recommendations</strong>. One could change this behaviour thanks to the 'mode' parameter:</p>
<ul>
<li>
<p><strong>mode='both'</strong>: two graphs will be created, the first one containing eventual <em>zero recommendations</em>, the
  second one where <em>zero recommendations</em> are excluded. This additional graph will be stored as
  <em>out_dir/file_name_no_zeros.format</em> (the string '_no_zeros' will be added to the file_name chosen automatically)</p>
</li>
<li>
<p><strong>mode='w_zeros'</strong>: only a graph containing eventual <em>zero recommendations</em> will be created</p>
</li>
<li>
<p><strong>mode='no_zeros'</strong>: only a graph excluding eventual <em>zero recommendations</em> will be created. The graph will be
  saved as <em>out_dir/file_name_no_zeros.format</em> (the string '_no_zeros' will be added to the file_name chosen
  automatically)</p>
</li>
</ul>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>out_dir</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Directory where the plot will be saved. Default is '.', meaning that the plot will be saved
in the same directory where the python script it's being executed</p></td>
          <td>
                <code>&#39;.&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Name of the plot file. Default is 'pop_recs_correlation'</p></td>
          <td>
                <code>&#39;pop_recs_correlation&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>mode</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Parameter which dictates which graph must be created. By default is 'both', so the graph with
eventual zero recommendations as well as the graph excluding eventual zero recommendations will be created.
Check the class documentation for more</p></td>
          <td>
                <code>&#39;both&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>format</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Format of the plot file. Could be 'jpg', 'svg', 'png'. Default is 'png'</p></td>
          <td>
                <code>&#39;png&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>overwrite</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>parameter which specifies if the plot saved must overwrite any file that as the same name
('file_name.format'). Default is False</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>clayrs/evaluation/metrics/plot_metrics.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PopRecsCorrelation</span><span class="p">(</span><span class="n">PlotMetric</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This metric generates a plot which has as the X-axis the popularity and as Y-axis number of recommendations, so</span>
<span class="sd">    that it can be easily seen the correlation between popular (niche) items and how many times are being recommended</span>
<span class="sd">    by the recsys</span>

<span class="sd">    The plot file will be saved as *out_dir/file_name.format*</span>

<span class="sd">    Since multiple split could be evaluated at once, the *overwrite* parameter comes into play:</span>
<span class="sd">    if is set to False, file with the same name will be saved as *file_name (1).format*, *file_name (2).format*, etc.</span>
<span class="sd">    so that for every split a plot is generated without overwriting any file previously generated</span>

<span class="sd">    There exists cases in which some items are not recommended even once, so in the graph could appear</span>
<span class="sd">    **zero recommendations**. One could change this behaviour thanks to the &#39;mode&#39; parameter:</span>

<span class="sd">    - **mode=&#39;both&#39;**: two graphs will be created, the first one containing eventual *zero recommendations*, the</span>
<span class="sd">      second one where *zero recommendations* are excluded. This additional graph will be stored as</span>
<span class="sd">      *out_dir/file_name_no_zeros.format* (the string &#39;_no_zeros&#39; will be added to the file_name chosen automatically)</span>

<span class="sd">    - **mode=&#39;w_zeros&#39;**: only a graph containing eventual *zero recommendations* will be created</span>

<span class="sd">    - **mode=&#39;no_zeros&#39;**: only a graph excluding eventual *zero recommendations* will be created. The graph will be</span>
<span class="sd">      saved as *out_dir/file_name_no_zeros.format* (the string &#39;_no_zeros&#39; will be added to the file_name chosen</span>
<span class="sd">      automatically)</span>


<span class="sd">    Args:</span>
<span class="sd">        out_dir (str): Directory where the plot will be saved. Default is &#39;.&#39;, meaning that the plot will be saved</span>
<span class="sd">            in the same directory where the python script it&#39;s being executed</span>
<span class="sd">        file_name (str): Name of the plot file. Default is &#39;pop_recs_correlation&#39;</span>
<span class="sd">        mode (str): Parameter which dictates which graph must be created. By default is &#39;both&#39;, so the graph with</span>
<span class="sd">            eventual zero recommendations as well as the graph excluding eventual zero recommendations will be created.</span>
<span class="sd">            Check the class documentation for more</span>
<span class="sd">        format (str): Format of the plot file. Could be &#39;jpg&#39;, &#39;svg&#39;, &#39;png&#39;. Default is &#39;png&#39;</span>
<span class="sd">        overwrite (bool): parameter which specifies if the plot saved must overwrite any file that as the same name</span>
<span class="sd">            (&#39;file_name.format&#39;). Default is False</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;pop_recs_correlation&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;both&#39;</span><span class="p">,</span>
                 <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="s1">&#39;no_zeros&#39;</span><span class="p">,</span> <span class="s1">&#39;w_zeros&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__mode</span> <span class="o">=</span> <span class="n">mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Mode </span><span class="si">{}</span><span class="s2"> is not supported! Modes available:</span><span class="se">\n</span><span class="s2">&quot;</span>
                             <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">valid</span><span class="p">))</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;PopRecsCorrelation&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;PopRecsCorrelation(&#39;</span>\
               <span class="sa">f</span><span class="s1">&#39;out_dir=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;file_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_name</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;mode=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__mode</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;format=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="si">}</span><span class="s1">, &#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;overwrite=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span> <span class="nf">build_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method which builds a matplotlib plot given x-axis values, y-axis values and the title of the plot.</span>
<span class="sd">        X-axis label and Y-axis label are hard-coded as &#39;Popularity&#39; and &#39;Recommendation frequency&#39; respectively.</span>

<span class="sd">        Args:</span>
<span class="sd">            x (list): List containing x-axis values</span>
<span class="sd">            y (list): List containing y-axis values</span>
<span class="sd">            title (str): title of the plot</span>

<span class="sd">        Returns:</span>
<span class="sd">            The matplotlib figure</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Popularity&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Recommendation frequency&#39;</span><span class="p">,</span>
               <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
                   <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">build_w_zeros_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popularities</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method which builds and saves the plot containing eventual *zero recommendations*</span>
<span class="sd">        It saves the plot as *out_dir/filename.format*, according to their value passed in the constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            popularities (list): x-axis values representing popularity of every item</span>
<span class="sd">            recommendations (list): y-axis values representing number of times every item has been recommended</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Popularity-Recommendations Correlation&#39;</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build_no_zeros_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popularities</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method which builds and saves the plot **excluding** eventual *zero recommendations*</span>
<span class="sd">        It saves the plot as *out_dir/filename_no_zeros.format*, according to their value passed in the constructor.</span>
<span class="sd">        Note that the &#39;_no_zeros&#39; string is automatically added to the file_name chosen</span>

<span class="sd">        Args:</span>
<span class="sd">            popularities (list): x-axis values representing popularity of every item</span>
<span class="sd">            recommendations (list): y-axis values representing number of times every item has been recommended</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Popularity-Recommendations Correlation (No zeros)&#39;</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_name</span> <span class="o">+</span> <span class="s1">&#39;_no_zeros&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">split</span><span class="p">:</span> <span class="n">Split</span><span class="p">):</span>
        <span class="n">predictions</span> <span class="o">=</span> <span class="n">split</span><span class="o">.</span><span class="n">pred</span>
        <span class="n">truth</span> <span class="o">=</span> <span class="n">split</span><span class="o">.</span><span class="n">truth</span>

        <span class="c1"># Calculating popularity by item</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">truth</span><span class="o">.</span><span class="n">item_id_column</span>
        <span class="n">pop_by_items</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

        <span class="c1"># Calculating num of recommendations by item</span>
        <span class="n">pop_by_items</span> <span class="o">=</span> <span class="n">pop_by_items</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
        <span class="n">recs_by_item</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">predictions</span><span class="o">.</span><span class="n">item_id_column</span><span class="p">)</span>
        <span class="n">popularities</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">recommendations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">popularities_no_zeros</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">recommendations_no_zeros</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

        <span class="n">at_least_one_zero</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_by_items</span><span class="p">:</span>
            <span class="n">num_of_recs</span> <span class="o">=</span> <span class="n">recs_by_item</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>

            <span class="n">popularities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num_of_recs</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">num_of_recs</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">popularities_no_zeros</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
                <span class="n">recommendations_no_zeros</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num_of_recs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">at_least_one_zero</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Both when possible</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mode</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_w_zeros_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">at_least_one_zero</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">build_no_zeros_plot</span><span class="p">(</span><span class="n">popularities_no_zeros</span><span class="p">,</span> <span class="n">recommendations_no_zeros</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">build_no_zeros_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;There&#39;s no zero recommendation!</span><span class="se">\n</span><span class="s2">&quot;</span>
                               <span class="s2">&quot;The graph with &#39;no-zero&#39; is identical to the &#39;w-zero&#39; one!&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mode</span> <span class="o">==</span> <span class="s1">&#39;w_zeros&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_w_zeros_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mode</span> <span class="o">==</span> <span class="s1">&#39;no_zeros&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_no_zeros_plot</span><span class="p">(</span><span class="n">popularities_no_zeros</span><span class="p">,</span> <span class="n">recommendations_no_zeros</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;item_id&#39;</span><span class="p">,</span> <span class="s1">&#39;score&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_no_zeros_plot" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_no_zeros_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method which builds and saves the plot <strong>excluding</strong> eventual <em>zero recommendations</em>
It saves the plot as <em>out_dir/filename_no_zeros.format</em>, according to their value passed in the constructor.
Note that the '_no_zeros' string is automatically added to the file_name chosen</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>popularities</code></td>
          <td>
                <code>list</code>
          </td>
          <td><p>x-axis values representing popularity of every item</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recommendations</code></td>
          <td>
                <code>list</code>
          </td>
          <td><p>y-axis values representing number of times every item has been recommended</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/evaluation/metrics/plot_metrics.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">build_no_zeros_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popularities</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method which builds and saves the plot **excluding** eventual *zero recommendations*</span>
<span class="sd">    It saves the plot as *out_dir/filename_no_zeros.format*, according to their value passed in the constructor.</span>
<span class="sd">    Note that the &#39;_no_zeros&#39; string is automatically added to the file_name chosen</span>

<span class="sd">    Args:</span>
<span class="sd">        popularities (list): x-axis values representing popularity of every item</span>
<span class="sd">        recommendations (list): y-axis values representing number of times every item has been recommended</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Popularity-Recommendations Correlation (No zeros)&#39;</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>

    <span class="n">file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_name</span> <span class="o">+</span> <span class="s1">&#39;_no_zeros&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_plot" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method which builds a matplotlib plot given x-axis values, y-axis values and the title of the plot.
X-axis label and Y-axis label are hard-coded as 'Popularity' and 'Recommendation frequency' respectively.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>x</code></td>
          <td>
                <code>list</code>
          </td>
          <td><p>List containing x-axis values</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>y</code></td>
          <td>
                <code>list</code>
          </td>
          <td><p>List containing y-axis values</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>title</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>title of the plot</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>The matplotlib figure</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/evaluation/metrics/plot_metrics.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">build_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method which builds a matplotlib plot given x-axis values, y-axis values and the title of the plot.</span>
<span class="sd">    X-axis label and Y-axis label are hard-coded as &#39;Popularity&#39; and &#39;Recommendation frequency&#39; respectively.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (list): List containing x-axis values</span>
<span class="sd">        y (list): List containing y-axis values</span>
<span class="sd">        title (str): title of the plot</span>

<span class="sd">    Returns:</span>
<span class="sd">        The matplotlib figure</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Popularity&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Recommendation frequency&#39;</span><span class="p">,</span>
           <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
               <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="clayrs.evaluation.metrics.plot_metrics.PopRecsCorrelation.build_w_zeros_plot" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_w_zeros_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method which builds and saves the plot containing eventual <em>zero recommendations</em>
It saves the plot as <em>out_dir/filename.format</em>, according to their value passed in the constructor</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>popularities</code></td>
          <td>
                <code>list</code>
          </td>
          <td><p>x-axis values representing popularity of every item</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recommendations</code></td>
          <td>
                <code>list</code>
          </td>
          <td><p>y-axis values representing number of times every item has been recommended</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>clayrs/evaluation/metrics/plot_metrics.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">build_w_zeros_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popularities</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method which builds and saves the plot containing eventual *zero recommendations*</span>
<span class="sd">    It saves the plot as *out_dir/filename.format*, according to their value passed in the constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        popularities (list): x-axis values representing popularity of every item</span>
<span class="sd">        recommendations (list): y-axis values representing number of times every item has been recommended</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Popularity-Recommendations Correlation&#39;</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_plot</span><span class="p">(</span><span class="n">popularities</span><span class="p">,</span> <span class="n">recommendations</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>

    <span class="n">file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_name</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../fairness_metrics/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Fairness metrics" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Fairness metrics
            </div>
          </div>
        </a>
      
      
        
        <a href="../../eval_model/" class="md-footer__link md-footer__link--next" aria-label="Next: Wilcoxon" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Wilcoxon
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.tooltips", "navigation.tabs", "navigation.sections", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.3a4b43e5.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>